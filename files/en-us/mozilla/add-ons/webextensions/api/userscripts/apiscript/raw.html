<p>{{AddOnSidebar}}</p>

<p>The userScripts APIScript is a special kind of extension Content Script.</p>

<p>Like a regular extension Content Script:</p>

<ul>
 <li>It runs in the content processes.</li>
 <li>It has access to the window and document globals related to the webpage it is attached to.</li>
 <li>It has access to the same subset of WebExtension APIs usually available in a content script.</li>
</ul>

<p>Unlike a regular extension Content Script:</p>

<ul>
 <li>It has to be declared in the manifest using the user_scripts.api_script property.</li>
</ul>

<pre class="brush: json">manifest.json
{
  ...
  "user_scripts": {
     "api_script": "apiscript.js"
  }
}</pre>

<p>It is executed automatically on any webpage matched by userScript registered by the same extension, before any matched userScript is executed.</p>

<p>It has access to the API Event browser.userScripts.onBeforeScript which the APIScript can use to subscribe a listener to be called right before a matched userScript is being executed, which allows the APIScript to export a set of custom API methods to make available to the userScript.</p>