<p> </p>

<p><span class="comment">NOTE: Los cambios significativos realizados a esta página deben ser revisados por Mark Mentovai <a class="link-mailto" href="mailto:(mark@moxienet.com)" rel="freelink">(mark@moxienet.com)</a>, or one of the build-config peers</span></p>

<p>Los compiladores de Mozilla para Mac OS X son compilaciones Mach-O, con gcc y Makefiles. Compilar en Mac OS X es muy similar a hacerlo en <a href="es/Requerimientos_para_la_compilaci%c3%b3n_en_Linux">Unix/Linux</a>. Deberías sentirte bien utilizando la Terminal ubicada end (<code>/Applications/Utilities</code>). También hay instrucciones adicionales para <a href="es/Mac_OS_X_Universal_Binaries">compilar Mozilla como un binario universal</a>.</p>

<p>El <a class="external" href="http://www.mozilla.org/build/mac_cfm.html">CodeWarrior-based CFM build system</a> es obsoleto y no funciona desde Mozilla 1.3 alpha.</p>

<p>Si tienes problemas mira <a href="es/Mozilla_Build_FAQ">Mozilla Build preguntas frecuentes</a> o el resto de la <a href="es/Documentaci%c3%b3n_para_la_compilaci%c3%b3n">documentación de compilado de Mozilla.</a></p>

<p>{{ page("es/docs/Build_Documentation/TOC") }}</p>

<p> </p>

<h3 id="Requerimientos_de_Hardware" name="Requerimientos_de_Hardware">Requerimientos de Hardware</h3>

<p>No hay requerimientos de hardware específicos, los requirimientos para ejecutar el <a href="#Requerimientos_de_software">software</a> necesario para compilar Mozilla. La compilación puede tomar mucho tiempo, aquí se listan los requerimientos mínimos.</p>

<ul>
 <li><strong>Procesador</strong> PowerPC G3 o superior, se recomienda PowerPC G5 o un procesador Intel, Mozilla puede ser compilado por ambos procesadores, o como un binario universal por ambos tipos (Mira <a href="es/Mac_OS_X_Universal_Binaries">Mac OS X Universal Binaries</a>).</li>
 <li><strong>Memoria:</strong> 256 RAM mínimo, se recomienda 1 GB.</li>
 <li><strong>Espacio en disco:</strong> por lo menos 1 GB de espacio libre para compilaciones sin depurar, para depurar se requiere al menos 2.5 GB de espacio libre.</li>
</ul>

<h3 id="Requerimientos_de_software" name="Requerimientos_de_software">Requerimientos de software</h3>

<ul>
 <li><strong>Sistema operativo:</strong> Mac OS X 10.3.9 o superior, se recomienda actualizar a la última distribución (actualmente 10.3.9 y 10.4.9, 10.5(Leopard)) ejecutando Software Update, en el menú Apple. Mozilla no se compilará o ejecutará en 10.1 ("Puma"). Mozilla 1.8.0 y 1.8.1 se ejecutarán en Mac OS X 10.2 ("Jaguar"), pero la compilación requiere 10.3 ("Panther"). Para Mozilla 1.9 (actual) Mac OS X 10.3 requiere un runtime. Para más detalles mira <a class="external" href="http://wiki.mozilla.org/Mac:Build_Requirements#Compatibility_Matrix">Mac compatibility matrix</a>.</li>
</ul>

<p>Para instalar los siguentes software necesitarás privilegios de administrador en la máquina.</p>

<ul>
 <li><strong>Entorno de desarrollo:</strong> <a class="external" href="http://developer.apple.com/tools/xcode/">Xcode Tools</a> 1.5 o superior. Las versiones anteriores de Xcode y Developer Tools ya no son soportadas. No se recomienda Xcode 2.0 pero 2.1 o superior servirán. Las configuraiones Xcode que ya han sido probadas se listan en <a class="external" href="http://wiki.mozilla.org/Mac:Build_Requirements#Compatibility_Matrix">Mac compatibility matrix</a>. Se recomienda instalar SDK. Esto lo haces clickeando "Customize" en el instalador Xcode. Hay dos formas para obtener o actualizar Xcode:

  <ul>
   <li><em>Descarga:</em><a class="external" href="http://developer.apple.com/tools/download/">Descarga Xcode</a> desde Apple. Esto te garantiza que tendrás las últimas versiones disponibles para tu computadora de las herramientas. Necesitarás una <a class="external" href="http://connect.apple.com/">membrecía</a> (gratis). Nota que la actualización Xcode no se instala a través de Software Update.</li>
   <li><em>DVD or CD: </em>La mayoría de las Macs y versiones de Mac OS X incluyen el instaldor Xcode en los discos de instalación, revisa tus discos.</li>
  </ul>
 </li>
 <li><strong>Administración de paquetes:</strong> Esto no es estrictamente requerido, pero simplifica la instalación de dependencias adicionales. Hay dos administradores de paquetes que son compatibles con Mozilla build system, Fink y DarwinPorts (MacPorts). Nota que la instalación del paquete tal vez tome tiempo pero es automático usando ambas herramientas..
  <ul>
   <li><em><a class="external" href="http://fink.sourceforge.net/">Fink</a></em>. Tal vez quieras <a class="external" href="http://fink.sourceforge.net/download/index.php">descargar</a> la última versión Fink que es compatible con tu sistema operativo. Fink se instala por defecto en <em>/sw</em>. El istalador configurará el entorno Fink y lo dejará disponible en cualquier ventana Terminal nueva. Si haces una actualización mas profunda de tu sistema operativo como pasar de Jaguar a Panther, deberás quitar el directorio <em>/sw</em> y volver a instalar Fink y los paquetes.</li>
   <li><em><a class="external" href="http://darwinports.opendarwin.org/">DarwinPorts</a></em>, descarga desde <a class="external" href="http://www.opendarwin.org/">OpenDarwin project</a>, pronto será nombrado MacPorts. Aquí <a class="external" href="http://darwinports.opendarwin.org/getdp/">descargas</a> el DarwinPorts correspondiente a la distribución de tu sistema operativo. DawinPorts se instalará por defecto en <em>/opt/local</em>. Luego de instalar DarwinPorts los combios estarán disponibles desde cualquier ventana Terminal nueva..</li>
  </ul>
 </li>
 <li><strong><a class="external" href="http://andrewtv.org/libIDL/">libIDL</a></strong> y <strong><a class="external" href="http://www.gtk.org/">GLib</a></strong>, librerias usadas por las IDL (Lenguaje de Definición de Interfaz) de Mozilla. Esto se puede instalar usando el administrador de paquetes. Se necesitan privilegios de administrador. Pasa tu password al comando <code>sudo</code> si lo solicita.
  <ul>
   <li>Usando Flink. libIDL es incluida en la instalción ORBit.
    <pre>$ sudo apt-get update
$ sudo apt-get install orbit orbit-dev glib</pre>
   </li>
   <li>Usando DarwinPorts. Al instalar libIDL también se instala GLib.
    <pre>$ sudo port sync
$ sudo port install libidl</pre>
   </li>
  </ul>
 </li>
 <li><strong>Shared Menus Cocoa Framework</strong> es requerido sólo para compilar <a class="external" href="http://www.caminobrowser.org/">Camino</a>. <a class="link-ftp" href="ftp://ftp.url-manager.com/pub/SharedMenusCocoa.dmg.bin">Descarga</a> el disco con la imagen de SharedMenusCocoa, extráelo usando <a class="external" href="http://www.stuffit.com/mac/expander/">StuffIt Expander</a> si es necesario, y copia la carpeta <code>SharedMenusCocoa.framework</code>, que está es la carpeta <code>SharedMenusCocoa/build</code>, hacia <code>/Library/Frameworks</code>. Asegúrate de mirar dentro de la carpeta <code>SharedMenusCocoa</code> y luego dentro de <code>build</code> para encontrar <code>SharedMenusCocoa.framework</code>. Si copias otra carpeta similar, la compilación de Camino fallará. Mira <a class="external" href="http://www.caminobrowser.org/development/build/">Camino-specific build instructions</a> para mas información information.</li>
 <li><strong><a class="external" href="http://www.gnu.org/software/autoconf/">autoconf</a> version 2.13</strong> version 2.13 se necesita sólo si planeas cambiar los scripts de configuración de Mozilla. Las versiones posteriores (incluyendo la que viene con Xcode) son incompatibles con Mozilla ({{ Bug(104642) }}).
  <ul>
   <li>Usando<em>Flink</em> autoconf se instala en &lt;code/sw/bin/autoconf&lt;/code&gt;. No instales <code>autoconf2.5</code> o <code>autoconf2.54</code>
    <pre>$ sudo apt-get install autoconf</pre>
   </li>
   <li>Usando<em>DarwinPorts</em> autoconf se instala en <code>/opt/local/bin/autoconf213</code> debes tipear <code>autoconf213</code> para ejecutarlo cuando otra documentación te lo solicite. No instales el paquete sin el subfijo 213.
    <pre>$ sudo port install autoconf213</pre>
   </li>
  </ul>
 </li>
</ul>

<h3 id="Opciones_.mozconfig_y_Otras" name="Opciones_.mozconfig_y_Otras">Opciones .mozconfig y Otras</h3>

<p>Estas opciones son específicas para Mac OS X. Para una mirada general sobre opciones de compilación y el archivo .mozconfig mira <a class="external" href="http://developer.mozilla.org/en/docs/Configuring_Build_Options">Configuring Build Options</a>. Para información sobre cómo configurar para compilar un binario universal mira <a class="external" href="http://developer.mozilla.org/en/docs/Mac_OS_X_Universal_Binaries">Mac OS X Universal Binaries</a>.</p>

<ul>
 <li><strong>Compilador:</strong> Si usas Mac OS X 10.4 (Tiger) o superior en PowerPC deberías cambiar el compilador que viene por defecto por gcc 3.3, el compilador usado para generar las compilaciones oficiales de PowerPC. Usa el siguiente comando:

  <pre>$ sudo gcc_select 3.3</pre>

  <p>Una alternativa a cambiar el compilador seria que especifiques cúal que usarás para Mozilla cuando lo configuras, hazlo indicando en las varibles de entorno <code>cc&lt;/code y &lt;code&gt;cxx</code> el compilador que deseas. Puedes ingresar los comandos en la Terminal antes de compilar o puedes indicarlo en el archivo <code>.mozconfig</code>.</p>

  <pre>export CC=gcc-3.3
export CXX=g++-3.3</pre>

  <p>Mozilla se compilará con gcc 4.0 (provisto por Xcode o superior), algunos desarrolladores lo prefieren. Las aplicaciones compiladas con gcc 4.0 sólo correran en Mac OS X 10.3.9 o superior. <strong>Las aplicaciones para Intel deben ser hechas con gcc 4.0</strong> (el gcc 3.3 de Apple no genera binarios para Intel) pero puedes usar gcc 3.3 en una Intel Mac para <a href="es/Mac_OS_X_Universal_Binaries#Cross-Compilation">multi-compilar</a> para PPC.</p>
  Ten cuidado que la optimización <code>-03</code> del gcc 3.3 para Mac OS X no es válida para compilar Mozilla, y todo compilador con <code>-fast</code> no compilará en PowerPC..</li>
</ul>

<p>Las siguentes líneas, espeficicadas con <code>ac_add_options</code>, pueden ser agregadas al archivo <code>.mozconfig.</code>.</p>

<ul>
 <li><strong>Mac OS X SDK:</strong> Selecciona la versión del los headers de sistema y las librerías para compilar, asegurándose que lo que compilas se ejecutará en sistemas mas viejos con menos APIs. Seleccionando esto se ignorará los headers y librerías por defecto en <code>/usr/include, /usr/lib,&lt;code&gt; y &lt;code&gt;/System/Library</code>. Los SDK de Mac OS X se instalan en <code>/Developer/SDKs</code>, durante la instalación de Xcode, seleccionando <strong>Cross Development</strong> en la pantalla <strong>Customize</strong>

  <pre>ac_add_options --with-macos-sdk=/path/to/SDK</pre>

  <p>Compilaciones PowerPC oficiales usa <code>/Developer/SDKs/MacOSX10.3.9.sdk</code> para el tronco, y <code>/Developer/SDKs/MacOSX10.2.8.sdk</code> para las ramas 1.8.0 y 1.8.1. Nota que no hay <code>MacOSX10.3.9.sdk</code> en Xcode 1.5 para Mac OS X 10.3, si estas usando Xcode 1.5, tendrás que usar el <code>MacOSX10.3.0</code> como reemplazo.</p>

  <p>Las compilaciones de Intel usaban y continuan usando <code>/Developer/SDKs/MacOSX10.4u.sdk.</code>.</p>

  <p>Nota que algunos frameworks (AppKit) son diferentes en la ejecución, dependiendo de cual SDK se usó a la hora de compilar. Esto puede ser la causa de los bugs que sólo aparecen en ciertas plataformas con ciertas compilaciones.</p>

  <p>No podrás compilar Mozilla usando SDK 10.2.8 incluido en el instalador de Xcode 2.4, si usas Xcode 2.4 mira la sección <a href="#Soluci.C3.B3n_de_problemas">Solución de problemas</a>.</p>
  Es altamente recomendable utilizar un SDK, especialmete al compilar con Xcode 1.5 en Mac OS X 10.3.</li>
 <li><strong>Deployment Target:</strong> Esta opción establece la versión mínima del sistema operativo en el que podrá correr la aplicación. El uso adecuado de esta opción requiere soporte adicional en el código:
  <pre>ac_add_options --enable-macos-target=version</pre>
  No se recomienda esta opción. Por defecto para el tronco es <code>10.3</code>; para <code>1.8.0 y 1.8.1</code> es 10.2 en PowerPC. Para Intel es <code>10.4</code>.</li>
 <li><strong><a class="external" href="http://developer.apple.com/releasenotes/DeveloperTools/Prebinding.html">Prebinding</a>:</strong> TEl Mozilla build system permite compilar una aplicación y librerías que esten prestablecidas. Funciona en Mac OS X 10.3.3 y anteriores.
  <pre>ac_add_options --enable-prebinding</pre>
  Las compilaciones PowerPC estan prestablecidas, las de Intel no. Ya que no corren en versiones anteriores a 10.4.</li>
 <li><strong>Ejemplo <code>.mozconfig</code>:</strong> Este <code>.mozconfig</code> es apropiado para compilar una versión de Minefield (equivalente a Firefox) para PowerPC que pueda correr en mayor rango posible de computadoras. Puede ser usado en cualquier PowerPC que cumpla con los <a href="#Requerimientos_de_software">Requerimientos de software</a>:
  <pre>export CC=gcc-3.3
export CXX=g++-3.3
. $topsrcdir/browser/config/mozconfig
ac_add_options --with-macos-sdk=/Developer/SDKs/MacOSX10.3.9.sdk
ac_add_options --enable-prebinding
ac_add_options --disable-tests</pre>

  <p>Este <code>.mozconfig</code> es apropiado para compilar Minefield en Intel, correrá en Mac OS X 10.4 o superior.</p>

  <pre>. $topsrcdir/browser/config/mozconfig
ac_add_options --with-macos-sdk=/Developer/SDKs/MacOSX10.4u.sdk
ac_add_options --disable-tests</pre>
 </li>
</ul>

<h3 id="Definiciones_de_compilado" name="Definiciones_de_compilado">Definiciones de compilado</h3>

<p>Las compilaciones Mac OS X, se configuran así:</p>

<ul>
 <li><code>XP_MACOSX</code> es definido</li>
 <li><code>XP_UNIX</code> es definido</li>
 <li><code>XP_MAC</code> <strong>no</strong> es definido. <code>XP_MAC</code> es obsoleto y lentamente está siendo quitado de la fuente (mira {{ Bug(281889) }}). Se usó para compilaciones CFM (no-Mach-O) para el clásico (pre-X) Mac OS.</li>
</ul>

<p>Esto requiere tener cuidado cuando se escribe código para plataformas Unix que excluyen Mac:</p>

<pre>#if defined(XP_UNIX) &amp;&amp; !defined(XP_MACOSX)</pre>

<h3 id="Soluci.C3.B3n_de_problemas" name="Soluci.C3.B3n_de_problemas">Solución de problemas</h3>

<p>TEl SDK 10.2.8 incluido en Xcode 2.4 (compilación 8K1079) tiene un bug que evita que Mozilla sea compilado con ese SDK. Apple ha sido notificado de ese bug el cual ha sido identificado como Radar 4671592. Apple lo solucionó en Xcode 2.4.1 .&lt;/li&gt;</p>

<ul>
 <li><strong>Después de instalar Xcode 2.4, la compilación falla en <code>nsLookAndFeel.cpp</code> con:<br>
  <code>error: `kThemeBrushAlternatePrimaryHighlightColor' undeclared (first use this function)</code>.</strong></li>
 <li><strong>Después de instalar QuickTime 7.0.4 en Mac OS X 10.3.9, la compilación falla en <code>libwidget_mac.dylib</code> with:<br>
  <code>ld: /usr/lib/gcc/darwin/3.3/libstdc++.a(eh_personality.o) illegal reference to symbol: ___cxa_begin_catch defined in indirectly referenced dynamic library /usr/lib/libstdc++.6.dylib</code>.</strong> &lt;p&gt;Necesitarás un SDK para trabajar en este problema. Selecciona el <code>MacOSX10.2.8.sdk</code> (recomendado) o <code>MacOSX10.3.0.sdk</code>. Para información detallada sobre cómo usar un SDK mira la sección <a href="#Opciones_.mozconfig_y_Otras">Opciones .mozconfig y Otras</a> .
  <p>Apple enlazó el framework de QuikTime 7.0.4 a la librería compartida libstdc++.6 disponible en Mac OS X 10.3.9 o superior, pero el compilador (gcc 3.3) y las herramientas usadas en este sistema no enlazan a esta librería. gcc 3.3 enlaza a su propia estaticamente-enlazada libstdc++. Los frameworks QuickTime en los SDKs no tienen este problema.</p>
 </li>
 <li><strong>Actualización QuickTime SDK:</strong> Si instalas o actualizas QuickTime 7, tal vez necesites instalar QuickTime SDK, disponible desde "Actualización del sistema" en el menú de Apple. Esta actualización es necesaria sólo si "Actualización del sistema" te indica que está disponible. La necesitas si la compilación falla debido a que no se encuentra <code>Sound.r</code>.</li>
 <li><strong>Usando<em>Fink,</em> tienes <code>apt-get: command not found</code>.</strong>
  <p><code>apt-get</code> no está en tu <code>$PATH</code>, Cierra y vuelve a abrir la Terminal e intenta nuevamente. Si continúa el error, Flink no fue capaz de configurarse completamente en tu sistema, prueba con esto:</p>

  <ul>
   <li>Si usas la shell <code>bash</code>, por defecto desde Mac OS X 10.3, edita el archivo <code>~/.bashrc</code>, agregando la siguiente línea (tal cual se escribe abajo):

    <pre>. /sw/bin/init.sh</pre>
   </li>
   <li>Si usas un shell <code>tcsh</code>, edita el archivo <code>~/.tchshrc</code> agregando la siguiente línea: &lt;/pre&gt;</li>
   <li>Luego de modificar los archivos cierra y vuelve a abrir la Terminal e intenta nuevamente.</li>
  </ul>
 </li>
</ul>

<ul>
 <li><strong>Usando<em>DarwinPorts</em> (MacPorts), tienes <code>port: command not found</code>.</strong>

  <p><code>port</code> no está en tu <code>$PATH</code>. Cierra y vuelve a abrir la Terminal e intenta nuevamente. Si el error continúa DarwinPorts no se terminó de configurar en tu sistema, prueba con los siguientes pasos:</p>

  <ul>
   <li>Si usas un shell <code>bash</code>, edita el archivo <code>~/bashrc</code> agregando la siguiente línea:

    <pre>export PATH="/opt/local/bin:/opt/local/sbin:$PATH"</pre>
   </li>
   <li>Si usas un shell <code>tcsh</code>, edita el archivo &lt;/code&gt;~/tcsh.rc&lt;/code&gt; agregando la siguiente línea:
    <pre>setenv PATH "/opt/local/bin:/opt/local/sbin:$PATH"</pre>
   </li>
   <li>Luego de modificar los archivos cierra y vuelve a abrir la Terminal e intenta nuevamente.</li>
  </ul>
 </li>
 <li><strong>Usando Fink con Virex 7.2:</strong> Usando Fink con Virex 7.2: Existe un conflicto entre Fink y Virez. Ambos colocan archivos en <code> /sw</code>. Si tienes instalado Virex debes actualizar por lo menos a la versión 7.2.1 como se describe en <a class="external" href="http://fink.sourceforge.net/news/index.php#2003-04-16%20Virex%20problem%20resolved">Fink News (2003-04-16)</a>.</li>
 <li><strong>La compilación se detiene mientras se compila <code>libwidget.rsrc</code> en <code>widget/src/mac</code></strong>
  <p>Elimina o cambia el nombre <code>~/Library/Preferences/.GlobalPreferences.plist</code>. No estamos seguros qué configuración en ese archivo causa este problema. Nota que si quitas el archivo las preferencias de sistema como programas recientes y demás también desaparecerán. .</p>
 </li>
 <li><strong>La compilación informa acerca de headers IDL perdidos:</strong> Asegúrate que instalaste la distribución orbit via <code>apt-get</code> de Flink, y que editaste <code>.bashrc</code> para el archivo <code>/sw/bin/init.sh&lt;code&gt; o &lt;code&gt;.tcshrc</code> para <code>/sw/bin/init.csh</code>.</li>
 <li><strong>La compilación informa acerca que algunos headers Menus Compartidos se perdieron:</strong> Mira que <code>SharedMenusCocoa.framework&lt;/code esté instalado en &lt;code&gt;/Library/Frameworks</code>, y que esté todo OK.</li>
 <li><strong>No se encuentra <code>dlfcn.h</code> con error <code>nsTraceRefcnt.cpp:68: dlfcn.h: No such file or directory</code></strong>
  <p>Asegúrate que tienes libdl.dylib desde Fink. Si instalas <a class="external" href="http://www.apple.com/downloads/macosx/unix_apps_utilities/bashthegnubourneagainshell.html">bash from Apple</a>, se provee una copia libdl.dylib necesaria para compilar nuevos programa que la usan (ej. Mozilla) y que no viene con los headers (ej. dlfcn.h). La solución es quitar el header de Apple e instalar el de Fink.<br>
   <br>
   (Gracias a <a class="link-mailto" href="mailto:am2stewa@uwaterloo.ca">Alex Stewart</a> por ayudarnos con esto.)</p>
 </li>
</ul>

<div class="noinclude"> </div>

<p>{{ languages( { "en": "en/Mac_OS_X_Build_Prerequisites", "fr": "fr/Pr\u00e9alables_\u00e0_la_compilation_sous_Mac_OS_X", "ja": "ja/Mac_OS_X_Build_Prerequisites" } ) }}</p>