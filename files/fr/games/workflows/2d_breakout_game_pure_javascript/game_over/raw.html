<div>{{GamesSidebar}}</div><div>{{IncludeSubnav("/en-US/docs/Games")}}</div>

<p>{{PreviousNext("Games/Workflows/2D_Breakout_game_pure_JavaScript/Paddle_and_keyboard_controls", "Games/Workflows/2D_Breakout_game_pure_JavaScript/Build_the_brick_field")}}</p>

<div class="summary">
<p>Voici la 5ème étape sur 10 du <a href="/en-US/docs/Games/Workflows/Breakout_game_from_scratch">Gamedev Canvas tutorial</a>. Vous pouvez trouver le code source comme il devrait être après avoir terminé cette leçon <a href="https://github.com/end3r/Gamedev-Canvas-workshop/blob/gh-pages/lesson05.html">Gamedev-Canvas-workshop/lesson5.html</a>.</p>
</div>

<p><span class="seoSummary">C'est sympa de regarder la balle rebondir contre les murs et de pouvoir bouger le paddle, mais à part ça, le jeu ne fait rien, il n'y a pas de progression ni de but final. Ca serait bon, du point de vue gameplay de pouvoir perdre. La façon de perdre dans le casse briques est simple. Si vous loupez la balle avec le paddle et la laissez atteindre le bas de l'écran, la partie est terminée.</span></p>

<h2 id="Intégrer_un_GameOver">Intégrer un GameOver</h2>

<p>Essayons d'intégrer un GameOver dans le jeu . Voyons une partie du code vu dans la troisième leçon, où nous faisions rebondir la balle contre les murs:</p>

<pre class="brush: js">if(x + dx &gt; canvas.width-ballRadius || x + dx &lt; ballRadius) {
    dx = -dx;
}

if(y + dy &gt; canvas.height-ballRadius || y + dy &lt; ballRadius) {
    dy = -dy;
}</pre>

<p>Au lieu de permettre à la balle de rebondir sur les quatre murs, n'en autorisons que trois désormais (gauche, haut et droite). Toucher le mur du bas mettra fin à la partie.</p>

<p>Nous allons  donc modifier le second "if bloc" (l'axe vertical, y) en y ajoutant un "else if" qui déclenchera un GameOver si la balle entre en collision avec le mur du bas. Pour l'instant nous allons rester simple et afficher un message d'alerte et redemarrer le jeu en rechargeant la page.</p>

<p>Remplacez la seconde instruction if par le code suivant:</p>

<pre class="brush: js">if(y + dy &lt; ballRadius) {
    dy = -dy;
} else if(y + dy &gt; canvas.height-ballRadius) {
    alert("GAME OVER");
    document.location.reload();
}</pre>

<h2 id="Faire_rebondir_la_balle_sur_le_paddle">Faire rebondir la balle sur le paddle</h2>

<p>La dernière chose à faire dans cette leçon est de créer une sorte de detection de collision entre le paddle et la balle, de sorte qu'elle puisse rebondir et revenir dans la zone de jeu. La chose la plus facile à faire est de vérifier si le centre de la balle se  trouve entre les bords droit et gauche du paddle. Mettez à jour le dernier bout de code que vous venez de modifier, comme indiqué de la manière qui suit:</p>

<pre class="brush: js">if(y + dy &lt; ballRadius) {
    dy = -dy;
} else if(y + dy &gt; canvas.height-ballRadius) {
    if(x &gt; paddleX &amp;&amp; x &lt; paddleX + paddleWidth) {
        dy = -dy;
    }
    else {
        alert("GAME OVER");
        document.location.reload();
    }
}</pre>

<p>Si la balle rentre en collision avec le mur du bas, nous devons vérifier si elle frappe le paddle. Si c'est le cas, la balle rebondit et revient dans la zone de jeu. Sinon, le jeu est terminé comme avant.</p>

<h2 id="Comparez_votre_code">Comparez votre code</h2>

<p>Voici les codes fonctionnels avec lesquels vous pouvez comparer les vôtres:</p>

<p>{{JSFiddleEmbed("https://jsfiddle.net/end3r/z4zy79fo/","","395")}}</p>

<div class="note">
<p><strong>Exercice: Faites en sorte que la balle accélère quand elle touche le paddle.</strong></p>
</div>

<h2 id="Prochaine_étape">Prochaine étape</h2>

<p>Nous avons déja bien avancé et notre jeu est devenu plus intéressant depuis que vous pouvez perdre! Mais il manque encore l'essentiel! Rendons nous au sixième chapitre —Fabriquer le champs de briques — et créons quelques briques que la balle pourra détruire.</p>

<p>{{PreviousNext("Games/Workflows/2D_Breakout_game_pure_JavaScript/Paddle_and_keyboard_controls", "Games/Workflows/2D_Breakout_game_pure_JavaScript/Build_the_brick_field")}}</p>