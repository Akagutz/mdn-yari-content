<p>{{AddonSidebar}}</p>

<p>Utilisez cette API pour enregistrer les scripts utilisateur, un type spécial de script d'extension de contenu. L'enregistrement d'un <code>userScript</code> demande au navigateur d'insérer le script donné dans les pages qui correspondent aux modèles d'URL passés à <code>{{WebExtAPIRef("userScripts.register","register()")}}</code>.</p>

<p>Pour utiliser l'API, appelez <code>{{WebExtAPIRef("userScripts.register","register()")}}</code> passing in an object en passant un objet définissant le script à enregistrer. La méthode retourne une promesse qui est résolue avec un objet <code>{{WebExtAPIRef("userScripts.RegisteredUserScript","RegisteredUserScript")}}</code>.</p>

<p>Scripts d'utilisateur :</p>

<ul>
 <li>s'exécuter dans les processus de contenu de l'extension</li>
 <li>avoir accès à la <code>fenêtre</code> et <code>documenter</code> les valeurs globales relatives à la page Web à laquelle elle est rattachée</li>
 <li>ont accès au même sous-ensemble d'API WebExtension qu'un script de contenu.</li>
</ul>

<p>Un <code>userScript</code> doit être déclaré dans le fichier manifeste de l'extension à l'aide de la clé manifest <code>"user_scripts"</code>.</p>

<p>Une fois chargé et enregistré, le script utilisateur est exécuté automatiquement sur n'importe quelle page Web correspondant à userScript enregistrée par la même extension, avant que l'<code>userScript</code> soit exécuté.</p>

<p>Une fois enregistré, un script utilisateur a accès à l'événement <code>beforeScript</code>, que l'<a href="/fr/docs/Mozilla/Add-ons/WebExtensions/API/userScripts/APIScript">APIScript</a> peut utiliser pour ajouter un écouteur d'événement qui sera appelé juste avant l'exécution d'un RegisteredUserScript correspondant. Cela permet au script utilisateur d'exporter un ensemble de méthodes d'API personnalisées à mettre à la disposition de l'userScript.</p>

<div class="blockIndicator note">
<p>Les scripts utilisateur sont désenregistrés lorsque la page d'extension correspondante (à partir de laquelle les scripts utilisateur ont été enregistrés) est déchargée, vous devez donc enregistrer un script utilisateur depuis une page d'extension qui persiste au moins aussi longtemps que vous voulez que les scripts utilisateur restent enregistrés</p>
</div>

<h2 id="Gestionnaires_dévénements">Gestionnaires d'événements</h2>

<dl>
 <dt>{{WebExtAPIRef("userScripts.onBeforeScript","onBeforeScript")}}</dt>
 <dd>Représente le code du gestionnaire d'événement qui sera exécuté avant l'exécution du userScript associé.</dd>
</dl>

<h2 id="Types">Types</h2>

<dl>
 <dt>{{WebExtAPIRef("userScripts.RegisteredUserScript","RegisteredUserScript")}}</dt>
 <dd>Un <code>object</code> de ce type est retourné par la méthode  {{WebExtAPIRef("userScripts.register","register()")}}. Il représente les scripts utilisateur qui ont été enregistrés par cet appel et peut être utilisé pour désenregistrer le script utilisateur.</dd>
</dl>

<h2 id="Méthodes">Méthodes</h2>

<dl>
 <dt>{{WebExtAPIRef("userScripts.register","register()")}}</dt>
 <dd>Enregistre les scripts utilisateur donnés.</dd>
</dl>

<h2 id="Compatibilité_du_navigateur">Compatibilité du navigateur</h2>

<p>{{Compat("webextensions.api.userScripts", 10, 1)}}</p>

<h2 id="Voir_aussi">Voir aussi</h2>

<ul>
 <li>{{WebExtAPIRef("contentScripts","browser.contentScripts")}}</li>
</ul>