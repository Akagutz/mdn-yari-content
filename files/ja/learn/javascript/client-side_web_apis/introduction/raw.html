<div>{{LearnSidebar}}</div>

<div>{{NextMenu("Learn/JavaScript/Client-side_web_APIs/Manipulating_documents", "Learn/JavaScript/Client-side_web_APIs")}}</div>

<p class="summary">まずはAPIを高い視点から見ていきます — これは何なのか、どう働くのか、あなたのコードでどう使うのか、どういう風に作られているのか? また様々なクラスのAPIは何なのか、どのような使い方があるのかも見ていきます。</p>

<table class="learn-box standard-table">
 <tbody>
  <tr>
   <th scope="row">前提条件:</th>
   <td>基本的なコンピュータの知識および利用能力、<a href="/en-US/docs/Learn/HTML">HTML</a> と <a href="/en-US/docs/Learn/CSS">CSS</a> の基本的な理解、JavaScript の基本 (<a href="/docs/Learn/JavaScript/First_steps">第一歩</a>、<a href="/docs/Learn/JavaScript/Building_blocks">構成要素</a>, <a href="/docs/Learn/JavaScript/Objects">JavaScriptオブジェクト</a>).</td>
  </tr>
  <tr>
   <th scope="row">目的:</th>
   <td>API に何ができて、あなたのコードでどう使えばいいのか知ること。</td>
  </tr>
 </tbody>
</table>

<h2 id="API_って何">API って何?</h2>

<p>Application Programming Interfaces (APIs) は、開発者が複雑な機能をより簡単に作成できるよう、プログラミング言語から提供される構造です。複雑なコードを抽象化し、それにかわる簡潔な構文を提供します。</p>

<p>実世界の例として、あなたの家、アパートや他の住処にある電気のコンセントについて考えて下さい。あなたの家で機器を使いたい時には、電源コードのプラグをコンセントに差し込めば事足ります。電源に直接結線したりしないでしょう — そんなのは非効率ですし、あなたが電気工事士でなければ、やってみるには難しいし危険です。</p>

<p><img alt="" src="https://mdn.mozillademos.org/files/14317/plug-socket.png" style="display: block; height: 472px; margin: 0px auto; width: 700px;"></p>

<p><em>画像提供: <a href="https://www.flickr.com/photos/easy-pics/9518184890/in/photostream/lightbox/">超タコ足コンセント</a> by <a href="https://www.flickr.com/photos/easy-pics/">The Clear Communication People</a>, Flickr より</em></p>

<p>それと同じことで、そうですね、例えば3次元グラフィックのプログラムを JavaScript や Python のような高レベル言語で書かれた API を使ってやる方が、C や C++ のような低レベル言語から直接コンピュータの GPU やグラフィック機能を叩いてやるよりも、ずっと簡単です。</p>

<div class="note">
<p><strong>注記</strong>: API という語についてもっと詳しいことは <a href="/ja/docs/Glossary/API">APIの用語解説</a> を参照して下さい。</p>
</div>

<h3 id="クライアントサイド_JavaScript_での_API">クライアントサイド JavaScript での API</h3>

<p>クライアントサイド API では、実際非常にたくさんのAPIが使えます — それらは JavaScript 言語本体の一部ではなく、あなたにスーパーパワーを与えるべく JavaScript 言語のコアの上に築かれた代物です。それらはおおよそ二つのカテゴリに分けられます:</p>

<ul>
 <li><strong>ブラウザ API</strong> は Web ブラウザに組込まれていて、ブラウザやコンピュータの環境の情報を取得し、これを使って役に立つややこしい事を行えるようにするものです。 例えば <a href="/en-US/docs/Web/API/Geolocation/Using_geolocation">Geolocation API</a> は位置情報を取得するための簡単な JavaScript 構造を提供するので、例えばグーグルマップにあなたの居場所を表示するような事ができます。裏で実際にはブラウザは低レベル (例えば C++) の複雑なコードをいくつか使ってデバイスの GPS 機器 (あるいは位置情報を得られる他のなんだか) と通信し、位置情報を取得し、コードから利用できるようにブラウザ環境に情報を戻しています。ですがここでもこの複雑な事柄は API で抽象化され隠蔽されます。</li>
 <li><strong>サードパーティ API</strong> はデフォルトではブラウザに組込まれておらず、普通はコードと情報を Web のどこから読み込まねばなりません。例えば <a href="https://dev.twitter.com/overview/documentation">Twitter API</a> を使えばあなたの Web サイトにあなたの最新のツイートを表示するような事が可能になります。Twitter API は、Twitter サービスに特定の情報を要求したりするのに使える特別な構造のかたまりを提供します。</li>
</ul>

<p> </p>

<p> </p>

<p><img alt="" src="https://mdn.mozillademos.org/files/13508/browser.png" style="display: block; height: 511px; margin: 0px auto; width: 815px;"></p>

<p> </p>

<h3 id="JavaScript_と_API_とその他_JavaScript_ツールの関係">JavaScript と API とその他 JavaScript ツールの関係</h3>

<p>ここまででクライアントサイド API とは何か、JavaScript 言語とどう関係しているのかお話しました。もっとはっきりさせるために一度おさらいして、ついでに他の JavaScript ツールがどう関係してくるのかもお話しましょう:</p>

<ul>
 <li>JavaScript — ブラウザに組込まれた高レベル言語で、Web ページやアプリに機能を実装するのに使えます。<a href="/en-US/docs/Learn/Server-side/Express_Nodejs/Introduction">Node</a> のようなブラウザ以外の他のプログラミング環境でも使えるのは覚えておいて下さい。</li>
 <li>ブラウザ API — ブラウザに組込みの JavaScript 言語の上にある構造で、何かの機能をもっと簡単に実装できるようにします。</li>
 <li>サードパーティ API — サードパーティのプラットフォーム (Twitter や Facebook) 上に作られた構造で、それらのプラットフォームの機能を Web ページで利用できるようにします (例えばあなたの最新のツイートをあなたの Web ページに表示する)。</li>
 <li>JavaScript ライブラリ — 多くは、<a href="/en-US/docs/Learn/JavaScript/Building_blocks/Functions#Custom_functions">独自の関数</a> を含んだ一つか複数の JavaScript ファイルで、Web ページにくっつけることでスピードアップしたり共通の機能を書いたりできるものです。例えば、jQuery、Mootools や React がなどが含まれます。</li>
 <li>JavaScript フレームワーク — ライブラリの一階層上にあたり、JavaScript フレームワーク (例えば Angular や Ember) は HTML や CSS に JavaScript、インストールして一から Web アプリケーションを作成するのに使えるその他もろもろの技術がパッケージ化されている場合が多いです。ライブラリとフレームワークの大きな相違点は、「制御の逆転 (Inversion of Control)」にあります。ライブラリのメソッドを呼ぶ時には、開発者がコントロールしています。フレームワークでは、コントロールが逆転します: フレームワークから開発者のコードが呼ばれるのです。</li>
</ul>

<h2 id="API_で何ができる">API で何ができる?</h2>

<p>モダンなブラウザではすごい数の API を利用できるので、コードからとてもいろいろな事ができます。 <a href="/ja/docs/Web/API">MDN API 索引</a>を見てみればわかると思います。</p>

<h3 id="一般的なブラウザ_API">一般的なブラウザ API</h3>

<p>特に、あなたが使うであろう最も一般的なブラウザ API のカテゴリ (このモジュールでとても詳しい所まで網羅していきます) は:</p>

<ul>
 <li>ブラウザで読み込んだ<strong>文書を操作するための API</strong>。一番目にする例は <a href="/ja/docs/Web/API/Document_Object_Model">DOM (Document Object Model) API</a> で、 HTML と CSS を操作できます — HTML を作成したり削除したり書き換えたり、動的に新しいスタイルをページに適用したり、などなど。例えばページにポップアップウィンドウが表われたり、何か新しい中身が表示されたりする時、DOM が使われています。この種の API については<a href="/ja/docs/Learn/JavaScript/Client-side_web_APIs/Manipulating_documents#The_document_object_model">ドキュメントの操作</a>でもっといろいろ見られます。</li>
 <li><strong>サーバからデータ取得をする API</strong> で Web ページの一部を書き換える事はとてもよく行なわれます。この一見ちょっとした事が、サイトのパフォーマンスや振舞いに巨大なインパクトを与えました  — 在庫一覧や新しいお話一覧を書き換えたい時に、サーバからページ全体をリロードする事なしにさくっとできたら、サイトやアプリはずっと反応よく素早く感じられます。これを可能にした API には <a href="https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest" title="XMLHttpRequest is an API that provides client functionality for transferring data between a client and a server. It provides an easy way to retrieve data from a URL without having to do a full page refresh. This enables a Web page to update just a part of the page without disrupting what the user is doing."><code>XMLHttpRequest</code></a> と <a href="https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API">Fetch API</a> が含まれています。Ajax という言葉を聞いた事があるかもしれませんが、これがこのテクニックの呼び名です。これらの API について <a href="/ja/docs/Learn/JavaScript/Client-side_web_APIs/Fetching_data">サーバからのデータ取得</a>でもっといろいろ見られます。</li>
 <li><strong>グラフィックスを描画したり操作する API</strong> は多くのブラウザがサポートしています — 最も知られているものには<a href="/docs/Web/API/Canvas_API">Canvas</a> と <a href="/docs/Web/API/WebGL_API">WebGL</a>があり、HTMLの{{htmlelement("canvas")}} 要素上にあるピクセルデータを書き換えて2次元や3次元のシーンを作成するのに使えます。例えばキャンバスAPIを使って長方形や円のような形を描いたり、キャンバスに画像を読み込んだり、セピアやグレイスケールといったフィルターを適用したり、あるいはWebGLを使ってライティングやテクスチャを使った3Dシーンを作成したりできます。これらのAPIはよくアニメーションループを作成するAPI({{domxref("window.requestAnimationFrame()")}}など)や他のものと組み合わせて使われ、アニメやゲームのようなものの表示を定期的に書き換えるようにします。</li>
 <li><strong><a href="https://developer.mozilla.org/en-US/Apps/Fundamentals/Audio_and_video_delivery">動画と音声のAPI</a></strong> {{domxref("HTMLMediaElement")}}や <a href="/docs/Web/API/Web_Audio_API">Web Audio API</a>や<a href="/docs/Web/API/WebRTC_API">WebRTC</a>のようなAPIを使うと、 マルチメディアを使ってとても面白い事ができます。音声や動画再生のための独自のコントロールUIの作成、字幕やサブタイトルのような音声トラックをビデオと一緒に表示したり、Webカメラの画像を取り込んで操作し、上述のキャンバスに表示したりWebカンファレンスに参加している他の誰かのコンピュータ上に表示したり、音声トラックにイフェクト(ゲイン、ディストーション、音場効果など)をかけたりできます。</li>
 <li><strong>デバイスAPI</strong> は基本的にWebアプリで使えるような形で、今時のハードウェアデバイスのデータを操作したり取得するAPIです。デバイスの位置データにアクセスして地図上にあなたの居場所を書くような位置情報APIについてはすでにお話しました。他の例にはシステム通知を使ってWebアプリに役に立つアップデートがあるのを知らせたり(<a href="/docs/Web/API/Notifications_API">Notifications API</a>を参照)、ハードウェアを振動させたり(<a href="/docs/Web/API/Vibration_API">Vibration API</a>を参照)などがあります。</li>
 <li><strong>クライアント側でのデータ保持API </strong>は今多くのブラウザに普及しつつあります。— クライアント側にデータを保存できると、ページを移動しても状態を保存したり、たとえデバイスがオフラインでも動作するようなアプリを作成したいような場合、とても役に立ちます。いくつもの選択肢があり、例えば<a href="/docs/Web/API/Web_Storage_API">Web Storage API</a>を使ったキーバリューストアや、 <a href="/docs/Web/API/IndexedDB_API">IndexedDB API</a>を使ったもっと複雑なテーブル型データ保存などです。</li>
</ul>

<h3 id="一般的なサードパーティAPI">一般的なサードパーティAPI</h3>

<p>サードパーティAPIはバラエティーに富んでいます。あなたが遅かれ早かれ使うようになりそうな、世間でよく使われているものには以下のようなものがあります:</p>

<ul>
 <li><a href="https://dev.twitter.com/overview/documentation">Twitter API</a>、あなたの最新のツイートをあなたのWebサイトに表示したりするような事に使えます。</li>
 <li><a href="https://developers.google.com/maps/">Google Maps API</a> あなたのWebページ上に地図を使ったあらゆる事(面白い事に、これはグーグルマップにとっても役立ちます)をやるのに使えます。今ではこれはAPIの完全体となり、<a href="https://developers.google.com/maps/documentation/api-picker">Google Maps API Picker</a>が証明しているように、非常に様々なタスクを取り扱えるようになりました。</li>
 <li><a href="https://developers.facebook.com/docs/">Facebook APIスイート</a>によってFacebookエコシステムの様々な部品を使ってあなたのアプリを強化できます。例えばアプリへのログインをFacebookのログインで行なったり、アプリ内での支払い、ターゲット広告を出したりなどです。</li>
 <li><a href="https://developers.google.com/youtube/">YouTube API</a>を使ってあなたのサイトにYouTubeのビデオを埋め込んだり、YouTubeを検索したり、プレイリストを作成したりなどなどできます。</li>
 <li><a href="https://www.twilio.com/">Twilio API</a>はあなたのアプリで音声・ビデオ電話の機能を作成したり、SMS/MMSを送信したりなどするためのフレームワークを提供します。</li>
</ul>

<div class="note">
<p><strong>注記</strong>: サードパーティAPIについては <a href="http://www.programmableweb.com/category/all/apis">Programmable Web API directory</a>でもっと多くの情報を見られます。</p>
</div>

<h2 id="APIはどのように動作する">APIはどのように動作する?</h2>

<p>異なるJavaScript APIはそれぞれに違う方法で動作しますが、普通は、共通した機能とどのように動くべきかの類似したテーマを持ちます。</p>

<h3 id="オブジェクトに基づいています">オブジェクトに基づいています</h3>

<p>あなたのコードは一つ以上の<a href="/docs/Learn/JavaScript/Objects">JavaScriptオブジェクト</a>を通じてAPIとやりとりし、オブジェクトはAPIが使用するデータ(オブジェクトのプロパティとして持つ)やAPIが提供する機能(オブジェクトメソッドとして持つ)の容れ物として使われます。</p>

<div class="note">
<p><strong>注記</strong>: もしまだオブジェクトがどのように動作するかについて理解があやふやなら、先に進む前に<a href="/docs/Learn/JavaScript/Objects">JavaScriptオブジェクト</a> モジュールを読みなおし、練習するのをおすすめします。</p>
</div>

<p>位置情報APIの例に戻りましょう — これは少数の単純なオブジェクトからなるとても簡単なAPIです:</p>

<ul>
 <li>{{domxref("Geolocation")}}、これには位置データ取得を制御するための三つのメソッドがあります。</li>
 <li>{{domxref("Position")}}、これには指定された時点のデバイスの位置を表わします — これには{{domxref("Coordinates")}}オブジェクトが含まれており、座標オブジェクトには実際の位置の情報と指定の時点を表わすタイムスタンプを含みます。</li>
 <li>{{domxref("Coordinates")}}には利用可能なデバイスの位置に関するデータがまるっと入っていて、緯度と経度、高度、速度、移動方向、などが含まれています。</li>
</ul>

<p>ではこれらのオブジェクトがどう関連するのでしょう? 例<a href="https://github.com/mdn/learning-area/blob/master/javascript/apis/introduction/maps-example.html">maps-example.html</a> を見ていただくと(<a href="http://mdn.github.io/learning-area/javascript/apis/introduction/maps-example.html">ライブ実行も見てね</a>)、次のようなコードがあります:</p>

<pre class="brush: js">navigator.geolocation.getCurrentPosition(function(position) {
  var latlng = new google.maps.LatLng(position.coords.latitude,position.coords.longitude);
  var myOptions = {
    zoom: 8,
    center: latlng,
    mapTypeId: google.maps.MapTypeId.TERRAIN,
    disableDefaultUI: true
  }
  var map = new google.maps.Map(document.querySelector("#map_canvas"), myOptions);
});</pre>

<div class="note">
<p><strong>注記</strong>: 最初に上の例がロード完了すると、ダイアログボックスが表示され「このアプリケーションに喜んで位置情報を差し出すかね?」と聞かれると思います({{anch("必要なところには追加のセキュリティ機構があります")}} この記事の後の方の節を見て下さい)。地図にあなたの居場所を表示するためにはこれに同意しなければなりません。もしそれでも地図が見えなけば、手作業で許可を出す必要があるのかもしれません。あなたが使っているブラウザにより異なる、いろいろな手順があります。例えば Firefox では<em>ツール</em> &gt; <em>ページ情報</em> &gt; <em>許可情報 </em>と移動し、位置情報の共有を切り替えて下さい。Chrome では <em>設定</em> &gt; <em>プライバシー</em> &gt; <em>詳細設定を表示</em> &gt; <em>コンテントの設定</em>  に移動し、位置情報の設定を切り替えて下さい。</p>
</div>

<p>まず最初に、私達のデバイスの現在位置を返す{{domxref("Navigator.geolocation")}}プロパティを呼ぶとブラウザの{{domxref("Geolocation")}}オブジェクトにアクセスできるので、次のようにして始めます:</p>

<pre class="brush: js">navigator.geolocation.getCurrentPosition(function(position) { ... });</pre>

<p>これはこんな風にするのと等価です</p>

<pre class="brush: js">var myGeo = navigator.geolocation;
myGeo.getCurrentPosition(function(position) { ... });</pre>

<p>が、ドット記法でプロパティ/メソッドを一つに繋いでいくことで、書かねばならない行数を減らせます。</p>

<p>{{domxref("Geolocation.getCurrentPosition()")}}メソッドに必須の引数は一つしかなく、これはデバイスの現在位置を上手く取得できた場合に走る匿名関数になります。この匿名関数自体の引数は一つで、現在の位置データを保持する{{domxref("Position")}}オブジェクトとなります。</p>

<div class="note">
<p><strong>注記</strong>: 他の関数の引数として引き渡される関数の事を<a href="/en-US/docs/Glossary/Callback_function">コールバック関数</a>と呼びます。</p>
</div>

<p>処理が完了した時にだけ関数を呼び出すというパターンはJavaScript APIにおいて非常によく使われます — それが返すはずのデータを別の処理で使用する前に、ある処理が完了したことを確実にするためです。こういう方法を<strong><a href="/en-US/docs/Glossary/Asynchronous">非同期</a>処理</strong>と呼びます。何故ならデバイスの現在位置を取得する事は外部コンポーネント(デバイスのGPSや他の位置取得ハードウェア)に依存していて、データが即座に返されすぐに使用できるよう、処理が時間内に完了するという保証がないからです。ですからこのような方法は上手くいきません:</p>

<pre class="brush: js example-bad">var position = navigator.geolocation.getCurrentPosition();
var myLatitude = position.coords.latitude;</pre>

<p>もし最初の行がまだ結果を返していない場合、位置情報がまだ得られていないので、2行目はエラーを起すでしょう。この理由から、非同期処理が含まれるAPIでは{{glossary("コールバック関数")}}を使うか、もっと今風の<a href="/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise">Promises</a>システム—これはECMAScript6で定義されていてより新しいAPIでは広く使用されています—を使うように設計されています。</p>

<p>私たちは位置情報APIと組み合わせてサードパーティーAPI — グーグルマップAPI — を <code>getCurrentPosition()</code> で返された地点をグーグルマップに表示するのに使いました。ページにリンクを作ってこのAPIが使えるようにします — HTML中にこの行があるでしょう:</p>

<pre class="brush: html">&lt;script type="text/javascript" src="https://maps.google.com/maps/api/js?key=AIzaSyDDuGt0E5IEGkcE6ZfrKfUtE9Ko_de66pA"&gt;&lt;/script&gt;</pre>

<p>APIを使うために、まず<code>google.maps.LatLng()</code>コンストラクタを使って<code>LatLng</code>オブジェクトインスタンスを作成しますが、これは{{domxref("Coordinates.latitude")}}と{{domxref("Coordinates.longitude")}}の値を引数に取ります:</p>

<pre class="brush: js">var latlng = new google.maps.LatLng(position.coords.latitude,position.coords.longitude);</pre>

<p>このオブジェクト自体は<code>myOption</code>という名前にしたオプション指定オブジェクトの<code>center</code>プロパティの値に設定します。それから <code>google.maps.Map()</code>コンストラクタに二つの引数 — 地図を中に表示させたい{{htmlelement("div")}}要素(<code>map_canvas</code>というIDを使って)への参照と、すぐ上で定義したオプション指定オブジェクト — を渡して呼び出し、地図を表わすオブジェクトのインスタンスを作成します。</p>

<pre class="brush: js">var myOptions = {
  zoom: 8,
  center: latlng,
  mapTypeId: google.maps.MapTypeId.TERRAIN,
  disableDefaultUI: true
}

var map = new google.maps.Map(document.querySelector("#map_canvas"), myOptions);</pre>

<p>これが完了すると、私たちの地図が表示されます。</p>

<p>このコードの最後の部分ハイライトは、多くのAPIで目にする事になる共通パターンが二つです。一つはAPIオブジェクトはたいていコンストラクタがあり、あなたのプログラムから使う用のインスタンスを作成するのに呼び出されます。二つめは、APIオブジェクトには、プログラムに必要な正確な環境を得るために調節できるよう、いくつかのオプションが用意されている事がよくある、という事です。APIコンストラクターはだいたい引数としてオプションオブジェクトを受理するので、これがそういったオプションをセットする場所になります。</p>

<div class="note">
<p><strong>注記</strong>: この例の細かい所までよく理解できなくても心配しないで大丈夫です。これから先の記事でサードパーティーAPIの使い方はもっと詳しく見ていきます。</p>
</div>

<h3 id="認識できる入口があります">認識できる入口があります</h3>

<p>APIを使うときは、そのAPIの入口がどこなのかしっかり確認するべきです。位置情報APIではとても単純でした — それは{{domxref("Navigator.geolocation")}} プロパティで、これはブラウザの{{domxref("Geolocation")}}を返し、使える位置情報用のメソッドを全部抱えています。</p>

<p>Document Object Model (DOM) APIでも単純な入口があります — これの機能は{{domxref("Document")}}もしくはなんかしたいHTML要素にぶらさがっている場合が多く、例えば:</p>

<pre class="brush: js">var em = document.createElement('em'); // create a new em element
var para = document.querySelector('p'); // reference an existing p element
em.textContent = 'Hello there!'; // give em some text content
para.appendChild(em); // embed em inside para</pre>

<p>他のAPIではもう少し複雑な入口があり、APIコードを書き込むための固有のコンテキストを作成しなければならないものがよくあります。例えばキャンバスAPIのコンテキストオブジェクトは、描画をしたい{{htmlelement("canvas")}}要素への参照を取得して、 これの{{domxref("HTMLCanvasElement.getContext()")}}メソッドを呼ぶと作成されます:</p>

<pre class="brush: js">var canvas = document.querySelector('canvas');
var ctx = canvas.getContext('2d');</pre>

<p>キャンバスを使って何かやろうとする場合は何でも、コンテキストオブジェクト(これは{{domxref("CanvasRenderingContext2D")}}のインスタンスです)のプロパティやメソッドを呼んで行ないます。例えば:</p>

<pre class="brush: js">Ball.prototype.draw = function() {
  ctx.beginPath();
  ctx.fillStyle = this.color;
  ctx.arc(this.x, this.y, this.size, 0, 2 * Math.PI);
  ctx.fill();
};</pre>

<div class="note">
<p><strong>注記</strong>: この実例を<a href="https://github.com/mdn/learning-area/blob/master/javascript/apis/introduction/bouncing-balls.html">弾むボールのデモ</a> (<a href="http://mdn.github.io/learning-area/javascript/apis/introduction/bouncing-balls.html">ライブ実行</a> も見てね)で見られます。</p>
</div>

<h3 id="状態の変化を捉えるのにイベントを使います">状態の変化を捉えるのにイベントを使います</h3>

<p>すでに学習コース中でイベントについてはお話しています、<a href="/ja/docs/Learn/JavaScript/Building_blocks/Events">イベントの紹介</a> — この記事でクライアント側Webイベントとは何か、コードの中でどのように使えるのか詳しく見てきました。もしまだクライアント側WebAPIの仕組みがよくわからいなら、この先に進む前に記事を読み直しておく方が良いでしょう。</p>

<p>イベントを持たないWebAPIもあり、イベントがたくさんあるWebAPIもあります。イベントが発火した際に関数を実行できるイベントハンドラーのプロパティについては、リファレンス記事の独立した"イベントハンドラー"セクションとしておおよそ列挙されています。 簡単な例として、<code><a href="/en-US/docs/Web/API/XMLHttpRequest">XMLHttpRequest</a></code> オブジェクトのインスタンス(一つ一つがサーバから何らかの新しいリソースを取得しようとするHTTPリクエストを表わします)にはとてもたくさんのイベントが付随しており、たとえば <code>load</code> イベントは要求したリソースに対する正常なレスポンスが返ってきて、それが使えるようになった時点で発火します。</p>

<p>次のコードはこれをどう使うのか示す簡単な例です:</p>

<pre class="brush: js">var requestURL = 'https://mdn.github.io/learning-area/javascript/oojs/json/superheroes.json';
var request = new XMLHttpRequest();
request.open('GET', requestURL);
request.responseType = 'json';
request.send();

request.onload = function() {
  var superHeroes = request.response;
  populateHeader(superHeroes);
  showHeroes(superHeroes);
}</pre>

<div class="note">
<p><strong>注記</strong>: <a href="https://github.com/mdn/learning-area/blob/master/javascript/apis/introduction/ajax.html">ajax.html</a> でこの例の動作を見られます(<a href="http://mdn.github.io/learning-area/javascript/apis/introduction/ajax.html">ライブ実行版</a>もどうぞ)。</p>
</div>

<p>最初の5行で取得したいリソースを指定し、<code>XMLHttpRequest()</code>コンストラクタを使って新しいリクエストオブジェクトを生成し、指定のリソースを取得するために<code>GET</code>リクエストを作り、レスポンスをJSON形式として吐き出すよう指定、そしてリクエストを送信します。</p>

<p><code>onload</code>ハンドラー関数で私たちがレスポンスに対して何を行なうかを指定します。loadイベントが起きるのはレスポンスが正常に得られた場合だけ(エラーは起きていない)とわかっていますので、JSONであるレスポンスを<code>superHeroes</code>変数に保存し、以降の処理のために二つの異なる関数に引き渡しています。</p>

<h3 id="必要なところには追加のセキュリティ機構があります">必要なところには追加のセキュリティ機構があります</h3>

<p>WebAPI機能はJavaScriptや他のWeb技術と同等のセキュリティ上の配慮が必要です(例えば<a href="/docs/Web/Security/Same-origin_policy">same-originポリシー</a>)が、追加のセキュリティ機構が必要な場合もあります。例として今時のWebAPIの中にはHTTPSで配信されるページ上でしか動かないものがあり、これは機密とすべきデータをやりとりする可能性があるためです(<a href="/docs/Web/API/Service_Worker_API">ServiceWorkers</a>や<a href="/docs/Web/API/Push_API">Push</a>など)。</p>

<p>さらには、ある種のWebAPIへの呼び出しがあなたのコードにあると、ユーザに対してそれの許可を要求します。例えば、以前やった<a href="/docs/Web/API/Geolocation">位置情報</a> の例が読み込まれた時、次のようなダイアログが出ていたのに気付いたでしょう:</p>

<p><img alt="" src="https://mdn.mozillademos.org/files/14313/location-permission.png" style="border-style: solid; border-width: 1px; display: block; height: 188px; margin: 0px auto; width: 413px;"></p>

<p><a href="/docs/Web/API/Notifications_API">Notifications API(通知API)</a> も類似の許可を要求します:</p>

<p><img alt="" src="https://mdn.mozillademos.org/files/14315/notification-permission.png" style="border-style: solid; border-width: 1px; display: block; margin: 0px auto;"></p>

<p>これらの許可要求プロンプトはユーザのセキュリティのためにあります — これらがその時に表示されないと、サイトはあなたに知らせることなくあなたの居場所を追跡しはじめたり、うざったい通知を送り付けまくったりできてしまいます。</p>

<h2 id="まとめ">まとめ</h2>

<p>ここまで来れば、API とは何か、どう動くのか、あなたのJavaScript コードからどんな事ができるのかよくわかったと思います。何か API を使って楽しいことをやりたくってしょうがなくなってることと思いますので、さあ始めましょう! 次から、<u>D</u>ocument <u>O</u>bject <u>M</u>odel(DOM) を使った文書の操作を見ていきます。</p>

<p>{{NextMenu("Learn/JavaScript/Client-side_web_APIs/Manipulating_documents", "Learn/JavaScript/Client-side_web_APIs")}}</p>

<h2 id="このモジュール">このモジュール</h2>

<ul>
 <li><a href="/docs/Learn/JavaScript/Client-side_web_APIs/Introduction">Web API の紹介</a></li>
 <li><a href="/ja/docs/Learn/JavaScript/Client-side_web_APIs/Manipulating_documents">ドキュメントの操作</a></li>
 <li><a href="/ja/docs/Learn/JavaScript/Client-side_web_APIs/Fetching_data">サーバからのデータ取得</a></li>
 <li><a href="/ja/docs/Learn/JavaScript/Client-side_web_APIs/Third_party_APIs">サードパーティ API</a></li>
 <li><a href="/docs/Learn/JavaScript/Client-side_web_APIs/Drawing_graphics">グラフィックの描画</a></li>
 <li><a href="/ja/docs/Learn/JavaScript/Client-side_web_APIs/Video_and_audio_APIs">動画と音声の API</a></li>
 <li><a href="/ja/docs/Learn/JavaScript/Client-side_web_APIs/Client-side_storage">クライアント側ストレージ</a></li>
</ul>