<div>{{APIRef("DOM")}}</div>

<p>指定のノードを現在のノードの子ノードとして参照要素の前に挿入します。</p>

<h2 id="Syntax" name="Syntax">構文</h2>

<pre>var <em>insertedNode</em> = <em>parentNode</em>.insertBefore(<em>newNode</em>, <em>referenceNode</em>);</pre>

<p><font face="consolas, Liberation Mono, courier, monospace"><span style="background-color: rgba(220, 220, 220, 0.5);"><em>referenceNode</em></span></font> が <code>null</code> の場合、 <code><em>newNode</em></code> は子ノードのリストの末尾に挿入されます。</p>

<ul>
 <li><code><em>insertedNode</em> </code>挿入されるノード、つまり <code>newElement</code> のこと</li>
 <li><em><code>parentNode</code></em> 新しく挿入されるノードの親ノード</li>
 <li><em><code>newNode</code></em> 挿入されるノード</li>
 <li><em><code>referenceNode</code></em> <em><code>newNode</code></em> が挿入される前にあるノード</li>
</ul>

<h2 id="Example" name="Example">例</h2>

<pre class="brush:html">&lt;!DOCTYPE html&gt;
&lt;html lang="ja"&gt;

&lt;head&gt;
  &lt;title&gt;Gecko DOM insertBefore test&lt;/title&gt;
&lt;/head&gt;

&lt;body&gt;

&lt;div&gt;
  &lt;span id="childSpan"&gt;foo bar&lt;/span&gt;
&lt;/div&gt;

&lt;script&gt;
// IDや属性、内容のない空の要素ノードを作成します。
var sp1 = document.createElement("span");

// 作成した要素に 'newSpan' というID属性を与えます。
sp1.setAttribute("id", "newSpan");

// 作成した要素のために適当な内容を作成します。
var sp1_content = document.createTextNode("This is a new span element. ");

// その内容を作成した要素に適用します。
sp1.appendChild(sp1_content);

var sp2 = document.getElementById("childSpan");
var parentDiv = sp2.parentNode;

// 新しい要素をDOMに sp2 の前に追加します。
parentDiv.insertBefore(sp1, sp2);
&lt;/script&gt;

&lt;/body&gt;
&lt;/html&gt;</pre>

<p><code>insertAfter</code> メソッドはありませんが、<code>insertBefore</code> メソッドと <code><a href="/ja/docs/DOM/element.nextSibling">nextSibling</a></code> メソッドを組み合わせてる事で同じ動作をエミュレートする事ができます。</p>

<p>先の例でいえば、次のようにして <code>sp1</code> を <code>sp2</code> の後ろへ挿入可能です。</p>

<pre class="brush:js;">parentDiv.insertBefore(sp1, sp2.nextSibling);</pre>

<p>もし <code>sp2</code> に次に隣り合うノードがない、つまり最後尾の子ノードで、<code>sp2.nextSibling</code> が <code>null</code> を返すならば、<code>sp1</code> は子ノードのリストの最後尾(つまり、<code>sp2</code> の直後)に挿入されるでしょう。</p>

<h2 id="Example2" name="Example2">例 2</h2>

<p><a href="/ja/docs/DOM/Node.firstChild" title="Node.firstChild">firstChild</a> プロパティを使用し、最初の子要素の前に要素を追加します。</p>

<pre class="brush:js">// 新しいノードの挿入先の親要素への参照を取得
var parentElement = document.getElementById('parentElement');

// 子要素への参照を取得
var theFirstChild = parentElement.firstChild;

// 新規の要素の作成
var newElement = document.createElement("div");

// 最初の子要素の前に新規の要素を挿入
parentElement.insertBefore(newElement, theFirstChild);</pre>

<p>※要素が最初の子要素を持たない場合、<code>firstChild</code> は <code>null</code> となります。その場合でも、子要素は <var>parentElement</var> の唯一の子要素として追加されます。</p>

<h2 id="Browser_Compatibility" name="Browser_Compatibility">ブラウザ実装状況</h2>

<p>{{CompatibilityTable()}}</p>

<div id="compat-desktop">
<table class="compat-table">
 <tbody>
  <tr>
   <th>機能</th>
   <th>Chrome</th>
   <th>Firefox (Gecko)</th>
   <th>Internet Explorer</th>
   <th>Opera</th>
   <th>Safari (WebKit)</th>
  </tr>
  <tr>
   <td>基本サポート</td>
   <td>1.0</td>
   <td>{{CompatVersionUnknown()}}</td>
   <td>{{CompatVersionUnknown()}}</td>
   <td>{{CompatVersionUnknown()}}</td>
   <td>{{CompatVersionUnknown()}}</td>
  </tr>
 </tbody>
</table>
</div>

<div id="compat-mobile">
<table class="compat-table">
 <tbody>
  <tr>
   <th>機能</th>
   <th>Android</th>
   <th>Firefox Mobile (Gecko)</th>
   <th>IE Phone</th>
   <th>Opera Mobile</th>
   <th>Safari Mobile</th>
  </tr>
  <tr>
   <td>基本サポート</td>
   <td>{{CompatUnknown()}}</td>
   <td>{{CompatUnknown()}}</td>
   <td>{{CompatUnknown()}}</td>
   <td>{{CompatUnknown()}}</td>
   <td>{{CompatUnknown()}}</td>
  </tr>
 </tbody>
</table>
</div>

<p> </p>

<h2 id="仕様">仕様</h2>

<p> </p>

<h2 id="Specification" name="Specification">関連情報</h2>

<ul>
 <li><a class="external" href="http://www.w3.org/TR/2000/REC-DOM-Level-2-Core-20001113/core.html#ID-952280727">insertBefore </a></li>
</ul>