<p>{{APIRef("Web Notifications")}}</p>

<p>{{domxref('Notifications_API','Notifications API')}}のNotificationインターフェイスは、ユーザーへのデスクトップ通知の設定や表示のために使われます。</p>

<p>{{AvailableInWorkers}}</p>

<h2 id="コンストラクタ">コンストラクタ</h2>

<dl>
 <dt>{{domxref("Notification.Notification()")}}</dt>
 <dd>{{domxref('Notification')}} オブジェクトのインスタンスを作成</dd>
</dl>

<h2 id="プロパティ">プロパティ</h2>

<h3 id="静的プロパティ">静的プロパティ</h3>

<p>この属性は<code>Notificationオブジェクトでのみ使用できます。</code></p>

<dl>
</dl>

<dl>
 <dt>{{domxref("Notification.permission")}} {{readonlyinline}}</dt>
 <dd>デスクトップ通知に対する現在の認可を表す文字列です。可能性な値は次の通りです。<code>denied</code> (ユーザーは通知が表示されることを拒否している)、<code>granted</code> (ユーザーは通知が表示されることを許諾している)、<code>default</code> (ユーザーの選択は不明のため、ブラウザは拒否されたかのように動作する)。</dd>
</dl>

<h3 id="インスタンスプロパティ">インスタンスプロパティ</h3>

<p>このプロパティはNotificationオブジェクトのインスタンスでのみ使用可能です。</p>

<dl>
 <dt>{{domxref("Notification.title")}} {{readonlyinline}}</dt>
 <dd>コンストラクタのオプションパラメーターで、通知のタイトルを指定します。</dd>
 <dt>{{domxref("Notification.dir")}} {{readonlyinline}}</dt>
 <dd>コンストラクタのオプションパラメーターで、通知のテキストの方向を指定します。</dd>
 <dt>{{domxref("Notification.lang")}} {{readonlyinline}}</dt>
 <dd>コンストラクタのオプションパラメーターで、通知の言語コードを指定します。</dd>
 <dt>{{domxref("Notification.body")}} {{readonlyinline}}</dt>
 <dd>コンストラクタのオプションパラメーターで、通知のbody部分を指定します。</dd>
 <dt>{{domxref("Notification.tag")}} {{readonlyinline}}</dt>
 <dd>コンストラクタのオプションパラメーターで、通知のIDを指定します。</dd>
 <dt>{{domxref("Notification.icon")}} {{readonlyinline}}</dt>
 <dd>コンストラクタのオプションパラメーターで、通知のアイコンに画像URLを指定します。</dd>
 <dt>{{domxref("Notification.data")}} {{readonlyinline}}</dt>
 <dd>通知のデータを構造化したクローンを返します。</dd>
 <dt>{{domxref("Notification.silent")}} {{readonlyinline}}</dt>
 <dd>静かに通知をするかどうかを明示します。つまり、デバイスの設定に関係なく、通知の際に無音やバイブレーションさせない状態を設定できます。</dd>
</dl>

<h4 id="非対応プロパティ">非対応プロパティ</h4>

<p>このリストのプロパティは最新の仕様ですが、まだどのブラウザでもサポートしていません。<br>
 状況が更新されたり、定期的にチェックしつづけることをおすすめします。もし、このドキュメントが古くなっていることに気づいたら、私たちに教えてください。</p>

<dl>
 <dt>{{domxref("Notification.noscreen")}} {{readonlyinline}}</dt>
 <dd>発火した通知をデバイスの画面上で表示させるかどうかを指定します。</dd>
 <dt>{{domxref("Notification.renotify")}} {{readonlyinline}}</dt>
 <dd>古い通知が新しい通知に置き換えられた後、ユーザーに通知するかどうかを指定します。</dd>
 <dt>{{domxref("Notification.sound")}} {{readonlyinline}}</dt>
 <dd>通知が発火したとき、既定のシステム通知音の場所で再生する音声リソースを指定します。</dd>
 <dt>{{domxref("Notification.sticky")}} {{readonlyinline}}</dt>
 <dd>通知を'sticky'にするべきか指定します。例えば、'sticky'な場合、通知は容易にクリアできません。</dd>
 <dt>{{domxref("Notification.vibrate")}} {{readonlyinline}}</dt>
 <dd>知が発火したときにデバイスのバイブレーションハードウェアに通知するバイブレーションパターンを指定します。</dd>
</dl>

<h4 id="イベントハンドラ">イベントハンドラ</h4>

<dl>
 <dt>{{domxref("Notification.onclick")}}</dt>
 <dd>{{event("click")}}イベントのためのハンドラです。ユーザーが通知をクリックするたびにトリガーされます。</dd>
 <dt>{{domxref("Notification.onerror")}}</dt>
 <dd>{{event("error")}}イベントのハンドラです。通知がエラーに遭遇するためにトリガーされます。</dd>
</dl>

<h4 id="古いハンドラ">古いハンドラ</h4>

<p>次のイベントハンドラは下の{{anch("browser compatibility")}}セクションにリストされているように、まだサポートされています。ですが、現在の仕様にはリストされていません。これらの使用は古く、将来のブラウザバージョンでは動かなくなると思っておいた方が安全です。</p>

<dl>
 <dt>{{domxref("Notification.onclose")}}</dt>
 <dd>{{event("close")}}イベントのハンドラです。ユーザーが通知を閉じたときにトリガーされます。</dd>
 <dt>{{domxref("Notification.onshow")}}</dt>
 <dd>{{event("show")}} イベントのハンドラです。通知が表示されたときにトリガーされます。</dd>
</dl>

<h2 id="メソッド">メソッド</h2>

<h3 id="静的メソッド">静的メソッド</h3>

<p><br>
 これらのメソッドはNotificationオブジェクトからのみ使用できます。</p>

<dl>
 <dt>{{domxref("Notification.requestPermission()")}}</dt>
 <dd>ユーザーに通知を表示する許可をリクエストします。</dd>
</dl>

<h3 id="インスタンスメソッド">インスタンスメソッド</h3>

<p>これらのメソッドはNotificationオブジェクトのインスタンス、または<a href="/ja/docs/Web/JavaScript/Guide/Inheritance_and_the_prototype_chain"><code>prototype</code></a>からのみ使用できます。Notificationオブジェクトは、{{domxref("EventTarget")}}インターフェースも継承しています。</p>

<dl>
 <dt>{{domxref("Notification.close()")}}</dt>
 <dd>プログラムで通知を閉じます。</dd>
</dl>

<h2 id="例">例</h2>

<p>このようなベーシックなHTMLを想定しています。</p>

<pre class="brush: html">&lt;button onclick="notifyMe()"&gt;Notify me!&lt;/button&gt;</pre>

<p>これは次のように通知を送れます。次の冗長で完全なコードセットでは、はじめに通知がサポートされているかチェックした後、現在のオリジンが通知を送る許可が与えられているか確認し、その後通知を送る前に必要ならば、許可を要求します。</p>

<pre class="brush: js">function notifyMe() {
  // Let's check if the browser supports notifications
  if (!("Notification" in window)) {
    alert("This browser does not support desktop notification");
  }

  // Let's check whether notification permissions have already been granted
  else if (Notification.permission === "granted") {
    // If it's okay let's create a notification
    var notification = new Notification("Hi there!");
  }

  // Otherwise, we need to ask the user for permission
  else if (Notification.permission !== 'denied') {
    Notification.requestPermission(function (permission) {
      // If the user accepts, let's create a notification
      if (permission === "granted") {
        var notification = new Notification("Hi there!");
      }
    });
  }

  // At last, if the user has denied notifications, and you 
  // want to be respectful there is no need to bother them any more.
}</pre>

<p>{{EmbedLiveSample('%E4%BE%8B', '100%', 30)}}</p>

<p>多くの場合、この冗長性は必要ありません。例えば、私たちの<a href="http://mdn.github.io/emogotchi/">Emogotchi demo</a> (<a href="https://github.com/mdn/emogotchi">see source code</a>)では、通知の許可を送れるかを確認せずに、{{domxref("Notification.requestPermission")}}を実行しています。</p>

<pre class="brush: js">Notification.requestPermission();</pre>

<p>私たちが通知を発火したいときに、spawnNotification()関数を実行しています。― これはbodyとicon、titleを指定する引数が渡され、必要なoptionsオブジェクトを生成してから{{domxref("Notification.Notification","Notification()")}}コンストラクタを使って通知を発火します。</p>

<pre class="brush: js">function spawnNotification(theBody,theIcon,theTitle) {
  var options = {
      body: theBody,
      icon: theIcon
  }
  var n = new Notification(theTitle,options);
}</pre>

<h2 id="仕様">仕様</h2>

<table class="standard-table">
 <tbody>
  <tr>
   <th scope="col">Specification</th>
   <th scope="col">Status</th>
   <th scope="col">Comment</th>
  </tr>
  <tr>
   <td>{{SpecName('Web Notifications')}}</td>
   <td>{{Spec2('Web Notifications')}}</td>
   <td>Living standard</td>
  </tr>
 </tbody>
</table>

<h2 id="ブラウザ実装状況">ブラウザ実装状況</h2>

<p>{{CompatibilityTable}}</p>

<div id="compat-desktop">
<table class="compat-table">
 <tbody>
  <tr>
   <th>Feature</th>
   <th>Chrome</th>
   <th>Firefox (Gecko)</th>
   <th>Internet Explorer</th>
   <th>Opera</th>
   <th>Safari</th>
  </tr>
  <tr>
   <td>Basic support</td>
   <td>5{{property_prefix("webkit")}}<sup>[1]</sup><br>
    22</td>
   <td>4.0 {{property_prefix("moz")}}<sup>[2]</sup><br>
    22</td>
   <td>{{CompatNo}}</td>
   <td>25</td>
   <td>6<sup>[3]</sup></td>
  </tr>
  <tr>
   <td><code>icon</code></td>
   <td>5{{property_prefix("webkit")}}<sup>[1]</sup><br>
    22</td>
   <td>4.0 {{property_prefix("moz")}}<sup>[2]</sup><br>
    22</td>
   <td>{{CompatNo}}</td>
   <td>25</td>
   <td>{{CompatNo}}</td>
  </tr>
  <tr>
   <td>Available in workers</td>
   <td>{{CompatUnknown}}</td>
   <td>{{CompatGeckoDesktop("41.0")}}</td>
   <td>{{CompatUnknown}}</td>
   <td>{{CompatUnknown}}</td>
   <td>{{CompatUnknown}}</td>
  </tr>
  <tr>
   <td><code>silent</code></td>
   <td>{{CompatChrome(43.0)}}</td>
   <td>{{CompatNo}}</td>
   <td>{{CompatNo}}</td>
   <td>{{CompatNo}}</td>
   <td>{{CompatNo}}</td>
  </tr>
  <tr>
   <td><code>noscreen</code>, <code>renotify</code>, <code>sound</code>, <code>sticky</code></td>
   <td>{{CompatNo}}</td>
   <td>{{CompatNo}}</td>
   <td>{{CompatNo}}</td>
   <td>{{CompatNo}}</td>
   <td>{{CompatNo}}</td>
  </tr>
 </tbody>
</table>
</div>

<div id="compat-mobile">
<table class="compat-table">
 <tbody>
  <tr>
   <th>Feature</th>
   <th>Android</th>
   <th>Android Webview</th>
   <th>Firefox Mobile (Gecko)</th>
   <th>Firefox OS</th>
   <th>IE Mobile</th>
   <th>Opera Mobile</th>
   <th>Safari Mobile</th>
   <th>Chrome for Android</th>
  </tr>
  <tr>
   <td>Basic support</td>
   <td>{{CompatUnknown}}</td>
   <td>
    <p>{{CompatVersionUnknown}}</p>
   </td>
   <td>4.0{{property_prefix("moz")}}<sup>[2]</sup><br>
    22</td>
   <td>1.0.1{{property_prefix("moz")}}<sup>[2]</sup><br>
    1.2</td>
   <td>{{CompatNo}}</td>
   <td>{{CompatUnknown}}</td>
   <td>{{CompatNo}}</td>
   <td>
    <p>{{CompatVersionUnknown}}</p>
   </td>
  </tr>
  <tr>
   <td><code>icon</code></td>
   <td>{{CompatUnknown}}</td>
   <td>{{CompatVersionUnknown}}</td>
   <td>4.0{{property_prefix("moz")}}<sup>[2]</sup><br>
    22</td>
   <td>1.0.1{{property_prefix("moz")}}<sup>[2]</sup><br>
    1.2</td>
   <td>{{CompatNo}}</td>
   <td>{{CompatUnknown}}</td>
   <td>{{CompatNo}}</td>
   <td>{{CompatVersionUnknown}}</td>
  </tr>
  <tr>
   <td>Available in workers</td>
   <td>{{CompatUnknown}}</td>
   <td>{{CompatUnknown}}</td>
   <td>{{CompatGeckoMobile("41.0")}}</td>
   <td>{{CompatUnknown}}</td>
   <td>{{CompatUnknown}}</td>
   <td>{{CompatUnknown}}</td>
   <td>{{CompatUnknown}}</td>
   <td>{{CompatUnknown}}</td>
  </tr>
  <tr>
   <td><code>silent</code></td>
   <td>{{CompatNo}}</td>
   <td>{{CompatChrome(43.0)}}</td>
   <td>{{CompatNo}}</td>
   <td>{{CompatNo}}</td>
   <td>{{CompatNo}}</td>
   <td>{{CompatNo}}</td>
   <td>{{CompatNo}}</td>
   <td>{{CompatChrome(43.0)}}</td>
  </tr>
  <tr>
   <td><code>noscreen</code>, <code>renotify</code>, <code>sound</code>, <code>sticky</code></td>
   <td>{{CompatNo}}</td>
   <td>{{CompatNo}}</td>
   <td>{{CompatNo}}</td>
   <td>{{CompatNo}}</td>
   <td>{{CompatNo}}</td>
   <td>{{CompatNo}}</td>
   <td>{{CompatNo}}</td>
   <td>{{CompatNo}}</td>
  </tr>
 </tbody>
</table>
</div>

<p>[1] Chrome 22以前では、次の<a href="http://www.chromium.org/developers/design-documents/desktop-notifications/api-specification">古いプレフィックス付きバージョンの仕様</a>がサポートされており、新しい通知のインスタンスには{{domxref("window.navigator.webkitNotifications","navigator.webkitNotifications")}}オブジェクトを使用します。</p>

<p>Chrome 32以前では、{{domxref("Notification.permission")}}はサポートされていませんでした。</p>

<p>Chrome 42以前では、サービスワーカーの追加はサポートされていませんでした。</p>

<p>Chrome 49以降では、シークレットモードで通知はサポートされていません。</p>

<p>[2] Firefox 22 (Firefox OS &lt;1.2)以前では、{{domxref("window.navigator.mozNotification", "navigator.mozNotification")}} オブジェクトを通じて<code>createNotificationメソッドにより新しい通知を実行する必要があります。</code></p>

<p>Firefox 22 (Firefox OS &lt;1.2)以前では、showメソッドを呼び出すと通知が表示され、 <code>click</code>と<code>close</code>イベントのみがサポートされています。</p>

<p>Nick Desaulniersは、<a href="https://github.com/nickdesaulniers/fxos-irc/blob/master/js/notification.js">Notification shim</a>において新旧両方の実装をカバーしています。</p>

<p>One particular Firefox OS issue is that you can <a href="https://github.com/nickdesaulniers/fxos-irc/blob/0160cf6c3a2b5c9fe33822aaf6bcba3b7e846da9/my.js#L171">pass a path to an icon</a> to use in the notification, but if the app is packaged you cannot use a relative path like <code>/my_icon.png</code>. You also can't use <code>window.location.origin + "/my_icon.png"</code> because <code>window.location.origin</code> is null in packaged apps. The <a href="https://developer.mozilla.org/en-US/Apps/Developing/Manifest#origin">manifest origin field</a> fixes this, but it is only available in Firefox OS 1.1+. A potential solution for supporting Firefox OS &lt;1.1 is to <a href="https://github.com/nickdesaulniers/fxos-irc/blob/0160cf6c3a2b5c9fe33822aaf6bcba3b7e846da9/my.js#L168">pass an absolute URL to an externally hosted version of the icon</a>. This is less than ideal as the notification is displayed immediately without the icon, then the icon is fetched, but it works on all versions of Firefox OS.</p>

<p>When using notifications  in a Firefox OS app, be sure to add the <code>desktop-notification</code> permission in your manifest file. Notifications can be used at any permission level, hosted or above: <code>"permissions": { "desktop-notification": {} }</code></p>

<p>[3] Safari started to support notification with Safari 6, but only on Mac OSX 10.8+ (Mountain Lion).</p>

<h2 id="関連項目"><br>
 関連項目</h2>

<ul>
 <li><a href="/ja/docs/Web/API/Notifications_API/Using_the_Notifications_API">Using the Notifications API</a></li>
</ul>