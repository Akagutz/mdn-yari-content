<div>{{SeeCompatTable}}{{APIRef("Service Workers API")}}</div>

<p>{{domxref("ServiceWorkerRegistration")}} インターフェースの <code><strong>update</strong></code> メソッドは、service work のアップデートを試行します。 worker の script URL を取得できた場合や新しい worker が現在の worker と byte-by-byte で識別できない場合、新しい worker をインストールします。以前の取得が 24 時間以上前だった場合、worker の取得はいずれかのブラウザーキャッシュをバイパスします。</p>

<div class="note">
<p><strong>ノート</strong>: この機能は <a href="/ja/docs/Web/API/Web_Workers_API">Web Workers</a> で使用できます。</p>
</div>

<h2 id="Syntax" name="Syntax" style="line-height: 30px; font-size: 2.14285714285714rem;">構文</h2>

<pre class="syntaxbox" style="font-size: 14px;">ServiceWorkerRegistration.update();</pre>

<h3 id="引数">引数</h3>

<p>なし。</p>

<h3 id="戻り値">戻り値</h3>

<p>Void。</p>

<h2 id="例">例</h2>

<p>次のシンプルな例は、service worker 例を登録して、望むときに service worker を更新できるようにボタンのイベントハンドラを追加しています:</p>

<pre class="brush: js">if ('serviceWorker' in navigator) {
  navigator.serviceWorker.register('/sw-test/sw.js', {scope: 'sw-test'}).then(function(registration) {
    // registration worked
    console.log('Registration succeeded.');
    button.onclick = function() {
      registration.update();
    }
  }).catch(function(error) {
    // registration failed
    console.log('Registration failed with ' + error);
  });
};</pre>

<h2 id="仕様">仕様</h2>

<table class="standard-table">
 <tbody>
  <tr>
   <th scope="col">仕様</th>
   <th scope="col">ステータス</th>
   <th scope="col">コメント</th>
  </tr>
  <tr>
   <td>{{SpecName('Service Workers', '#service-worker-registration-update-method', 'ServiceWorkerRegistration.update()')}}</td>
   <td>{{Spec2('Service Workers')}}</td>
   <td>初期定義。</td>
  </tr>
 </tbody>
</table>

<h2 id="ブラウザー実装状況">ブラウザー実装状況</h2>

<div>{{CompatibilityTable}}</div>

<div id="compat-desktop">
<table class="compat-table">
 <tbody>
  <tr>
   <th>機能</th>
   <th>Chrome</th>
   <th>Firefox (Gecko)</th>
   <th>Internet Explorer</th>
   <th>Opera</th>
   <th>Safari (WebKit)</th>
  </tr>
  <tr>
   <td>基本サポート</td>
   <td>{{CompatChrome(45.0)}} [1] [2]</td>
   <td>{{ CompatGeckoDesktop("44.0") }}<sup>[3]</sup></td>
   <td>{{CompatNo}}</td>
   <td>{{CompatUnknown}}</td>
   <td>{{CompatNo}}</td>
  </tr>
  <tr>
   <td>web worker での利用</td>
   <td>{{CompatNo}}</td>
   <td>{{CompatGeckoDesktop("44.0")}}<sup>[3]</sup></td>
   <td>{{CompatNo}}</td>
   <td>{{CompatUnknown}}</td>
   <td>{{CompatNo}}</td>
  </tr>
 </tbody>
</table>
</div>

<div id="compat-mobile">
<table class="compat-table">
 <tbody>
  <tr>
   <th>機能</th>
   <th>Android</th>
   <th>Android Webview</th>
   <th>Firefox Mobile (Gecko)</th>
   <th>Firefox OS</th>
   <th>IE Mobile</th>
   <th>Opera Mobile</th>
   <th>Safari Mobile</th>
   <th>Chrome for Android</th>
  </tr>
  <tr>
   <td>基本サポート</td>
   <td>{{CompatUnknown}}</td>
   <td>{{CompatNo}}</td>
   <td>{{ CompatGeckoMobile("44.0") }}</td>
   <td>{{ CompatVersionUnknown }}</td>
   <td>{{CompatNo}}</td>
   <td>{{CompatUnknown}}</td>
   <td>{{CompatNo}}</td>
   <td>{{CompatChrome(45.0)}} [1] [2]</td>
  </tr>
  <tr>
   <td>web worker での使用</td>
   <td>{{CompatUnknown}}</td>
   <td>{{CompatNo}}</td>
   <td>{{CompatVersionUnknown}}</td>
   <td>{{CompatUnknown}}</td>
   <td>{{CompatNo}}</td>
   <td>{{CompatUnknown}}</td>
   <td>{{CompatNo}}</td>
   <td>{{CompatChrome(45.0)}} [1] [2]</td>
  </tr>
 </tbody>
</table>
</div>

<ul>
 <li>[1] Chrome 46 から、操作が成功した場合や更新がなかった場合、update() は 'undefined' で解決する promise を返します。更新が失敗した場合は reject します。インストールが失敗したが新しい worker が実行される場合、まだ promise が解決されます; 形式的には、例外が発生すべきです。</li>
 <li>[2] Chrome 48 以前では、このメソッドは常にブラウザーキャッシュをバイパスします。Chrome 48 から, worker の取得が 24 時間以上前だった場合のみ、ブラウザーキャッシュをバイパスします。</li>
 <li>[3] Service workers（と <a href="/ja/docs/Web/API/Push_API">Push</a>）は、<a href="https://www.mozilla.org/en-US/firefox/organizations/">Firefox 45 延長サポート版</a> （ESR）では使用できません。</li>
</ul>

<h2 id="関連項目">関連項目</h2>

<ul>
 <li><a href="/ja/docs/Web/API/ServiceWorker_API/Using_Service_Workers">Using Service Workers</a></li>
 <li><a href="https://github.com/mdn/sw-test">Service workers basic code example</a></li>
 <li><a href="https://jakearchibald.github.io/isserviceworkerready/">Is ServiceWorker ready?</a></li>
 <li>{{jsxref("Promise")}}</li>
 <li><a href="/ja/docs/Web/Guide/Performance/Using_web_workers">Using web workers</a></li>
</ul>