<p>{{DefaultAPISidebar("Websockets API")}}</p>

<p><strong>WebSocket API</strong> は、ユーザーのブラウザとサーバーの間で双方向の通信セッションを開くことを可能にする高度なテクノロジーです。この API を使用すると、サーバーにメッセージを送信し、レスポンスをサーバーにポーリングすることなく、イベント駆動のレスポンスを受信することができます。</p>

<div class="note">
<p><strong>メモ:</strong> WebSocket の接続は、標準的な Unix スタイルのソケットと機能的に多少似ていますが、関連はありません。</p>
</div>

<h2 id="Interfaces" name="Interfaces">インターフェイス</h2>

<dl>
 <dt><a href="/ja/docs/Web/API/WebSocket"><code>WebSocket</code></a></dt>
 <dd>WebSocket サーバに接続し、その接続を通じてデータを送受信するための主要インターフェイス</dd>
 <dt><code><a href="/ja/docs/Web/API/CloseEvent">CloseEvent</a></code></dt>
 <dd>接続が閉じた時に WebSocket オブジェクトによって送信されるイベントです。</dd>
 <dt><a href="/ja/docs/Web/API/MessageEvent"><code>MessageEvent</code></a></dt>
 <dd>サーバーからメッセージを受信した時に WebSocket オブジェクトによって送信されるイベント</dd>
</dl>

<h2 class="Tools" id="Tools" name="Tools">ツール</h2>

<ul>
 <li><a href="https://hacks.mozilla.org/2017/06/introducing-humblenet-a-cross-platform-networking-library-that-works-in-the-browser/">HumbleNet</a>: ブラウザーで動作するクロスプラットフォームのネットワークライブラリです。ブラウザー間の違いを抽象化する WebSocket や WebRTC の C ラッパー、ゲームやその他のアプリで複数ユーザーのネットワーク機能を作成するものから成ります。</li>
 <li><a href="https://github.com/uWebSockets/uWebSockets">µWebSockets</a>: <a href="https://isocpp.org/">C++11</a> 及び <a class="external" href="http://nodejs.org" title="http://nodejs.org/">Node.js</a> で書かれた可用性の高い WebSocket サーバーとクライアントの実装です。</li>
 <li><a href="https://github.com/ClusterWS/ClusterWS">ClusterWS</a>: <a class="external" href="http://nodejs.org" title="http://nodejs.org/">Node.js</a> でスケーラブルな WebSocket アプリケーションを構築する、軽量で高速で強力なフレームワークです。</li>
 <li><a class="external" href="http://socket.io" title="http://socket.io/">Socket.IO</a> : 長いポーリングと WebSocket ベースのサードバーティ―の <a class="external" href="http://nodejs.org" title="http://nodejs.org/">Node.js</a> 用転送プロトコルです。</li>
 <li><a href="http://socketcluster.io/">SocketCluster</a>: スケーラビリティに焦点を当てた <a class="external" href="http://nodejs.org" title="http://nodejs.org/">Node.js</a> 用の pub/sub WebSocket フレームワークです。</li>
 <li><a class="link-https" href="https://github.com/Worlize/WebSocket-Node" title="https://github.com/Worlize/WebSocket-Node">WebSocket-Node</a>: <a class="external external-icon" href="http://nodejs.org" title="http://nodejs.org/">Node.js</a> 用の WebSocket サーバー API 実装です。</li>
 <li><a href="http://www.totaljs.com">Total.js</a>: <a href="http://www.nodejs.org">Node.js</a> 用の ウェブアプリケーションフレームワーク(使用例: <a href="https://github.com/totaljs/examples/tree/master/websocket">WebSocket chat</a>)</li>
 <li><a href="https://www.npmjs.com/package/faye-websocket">Faye</a>: <a class="external external-icon" href="http://nodejs.org" title="http://nodejs.org/">Node.js</a> 用の <a href="/ja/docs/Web/API/WebSockets_API">WebSocket</a> (双方向接続) と <a href="/ja/docs/Web/API/EventSource/">EventSource</a> (片方向接続) サーバーおよびクライアント</li>
 <li><a href="http://signalr.net/">SignalR</a>: SignalR は単一のコードだけで、もしWebSocketsが使用可能な場合、基盤として WebSockets を使用し、そうでない場合はほかの代替技術にフォールバックします。</li>
 <li><a href="https://caddyserver.com/docs/websocket">Caddy</a>: WebSocket として任意のコマンド (stdin/stdout) を中継することができるウェブサーバーです。</li>
 <li><a href="https://github.com/websockets/ws">ws</a>: <a href="https://nodejs.org/en/">Node.js</a> のための有名な WebSocket クライアント＆サーバーライブラリです。</li>
 <li><a href="https://github.com/bigstepinc/jsonrpc-bidirectional">jsonrpc-bidirectional</a>: 使いやすい非同期の RPC ライブラリで、双方向呼び出しに対応しており、単一の WebSocket または RTCDataChannel (WebRTC) コネクションを使用ています。 TCP/SCTP/等のクライアントとサーバーは、それぞれのホストに同時に JSONRPC.Server 端点を持つことができます。</li>
 <li><a href="https://github.com/elpheria/rpc-websockets">rpc-websockets</a>: <a href="https://nodejs.org/en/">Node.js</a> および <a href="https://en.wikipedia.org/wiki/JavaScript">JavaScript</a> 用の WebSocket の JSON-RPC 2.0 実装です。</li>
</ul>

<h2 class="Related_Topics" id="Related_Topics" name="Related_Topics">関連トピック</h2>

<ul>
 <li><a href="/ja/docs/AJAX" title="AJAX">AJAX</a></li>
 <li><a href="/ja/docs/JavaScript" title="JavaScript">JavaScript</a></li>
</ul>

<h2 id="See_also" name="See_also">関連情報</h2>

<ul>
 <li><a class="external" href="http://tools.ietf.org/html/rfc6455">RFC 6455 — The WebSocket Protocol</a></li>
 <li><a class="external" href="http://www.w3.org/TR/websockets/">WebSocket API Specification</a></li>
 <li><a href="/ja/docs/Server-sent_events" title="Server-sent_events">Server-Sent Event</a></li>
</ul>

<h2 id="Browser_compatibility" name="Browser_compatibility">ブラウザーの対応</h2>

<div>{{CompatibilityTable}}</div>

<div id="compat-desktop">
<table class="compat-table">
 <tbody>
  <tr>
   <th>機能</th>
   <th>Chrome</th>
   <th>Edge</th>
   <th>Firefox (Gecko)</th>
   <th>Internet Explorer</th>
   <th>Opera</th>
   <th>Safari</th>
  </tr>
  <tr>
   <td>Version -76 の対応 {{obsolete_inline}}</td>
   <td>6</td>
   <td>{{CompatNo}}</td>
   <td>{{CompatGeckoDesktop("2.0")}}</td>
   <td>{{CompatNo}}</td>
   <td>11.00 (disabled)</td>
   <td>5.0.1</td>
  </tr>
  <tr>
   <td>Protocol version 7 の対応 {{obsolete_inline}}</td>
   <td>{{CompatNo}}</td>
   <td>{{CompatNo}}</td>
   <td>{{CompatGeckoDesktop("6.0")}}<br>
    {{property_prefix("Moz")}}</td>
   <td>{{CompatNo}}</td>
   <td>{{CompatNo}}</td>
   <td>{{CompatNo}}</td>
  </tr>
  <tr>
   <td>Protocol version 10 の対応 {{obsolete_inline}}</td>
   <td>14</td>
   <td>{{CompatNo}}</td>
   <td>{{CompatGeckoDesktop("7.0")}}<br>
    {{property_prefix("Moz")}}</td>
   <td>HTML5 Labs</td>
   <td>{{CompatUnknown}}</td>
   <td>{{CompatUnknown}}</td>
  </tr>
  <tr>
   <td>Standard - RFC 6455 の対応</td>
   <td>43</td>
   <td>14</td>
   <td>{{CompatGeckoDesktop("48.0")}}</td>
   <td>10</td>
   <td>12.10</td>
   <td>6.0</td>
  </tr>
  <tr>
   <td>Worker での使用</td>
   <td>{{CompatVersionUnknown}}</td>
   <td>{{CompatVersionUnknown}}</td>
   <td>{{CompatGeckoDesktop("37.0")}}</td>
   <td>{{CompatUnknown}}</td>
   <td>{{CompatUnknown}}</td>
   <td>{{CompatUnknown}}</td>
  </tr>
 </tbody>
</table>
</div>

<div id="compat-mobile">
<table class="compat-table">
 <tbody>
  <tr>
   <th>機能</th>
   <th>Android</th>
   <th>Edge</th>
   <th>Firefox Mobile (Gecko)</th>
   <th>IE Mobile</th>
   <th>Opera Mobile</th>
   <th>Safari Mobile</th>
  </tr>
  <tr>
   <td>Version -76 の対応 {{obsolete_inline}}</td>
   <td>{{CompatUnknown}}</td>
   <td>{{CompatNo}}</td>
   <td>{{CompatUnknown}}</td>
   <td>{{CompatUnknown}}</td>
   <td>{{CompatUnknown}}</td>
   <td>{{CompatUnknown}}</td>
  </tr>
  <tr>
   <td>Protocol version 7 の対応 {{obsolete_inline}}</td>
   <td>{{CompatUnknown}}</td>
   <td>{{CompatNo}}</td>
   <td>{{CompatUnknown}}</td>
   <td>{{CompatUnknown}}</td>
   <td>{{CompatUnknown}}</td>
   <td>{{CompatUnknown}}</td>
  </tr>
  <tr>
   <td>Protocol version 8 の対応 (IETF draft 10) {{obsolete_inline}}</td>
   <td>{{CompatUnknown}}</td>
   <td>{{CompatNo}}</td>
   <td>{{CompatGeckoMobile("7.0")}}</td>
   <td>{{CompatUnknown}}</td>
   <td>{{CompatUnknown}}</td>
   <td>{{CompatUnknown}}</td>
  </tr>
  <tr>
   <td>Standard - RFC 6455 の対応</td>
   <td>4.4</td>
   <td>(Yes)</td>
   <td>{{CompatGeckoDesktop("11.0")}}</td>
   <td>{{CompatUnknown}}</td>
   <td>12.10</td>
   <td>6.0</td>
  </tr>
  <tr>
   <td>Worker での使用</td>
   <td>{{CompatVersionUnknown}}</td>
   <td>{{CompatVersionUnknown}}</td>
   <td>{{CompatGeckoMobile("37.0")}}</td>
   <td>{{CompatUnknown}}</td>
   <td>{{CompatUnknown}}</td>
   <td>{{CompatUnknown}}</td>
  </tr>
 </tbody>
</table>
</div>

<h3 id="Gecko_notes" name="Gecko_notes">Gecko に関する注記</h3>

<p>Firefox の WebSocket サポートは、進展する WebSocket 仕様への追従を継続しています。Firefox 6 は基礎的なプロトコルのバージョン 7 を実装し、また Firefox 7 はバージョン 8 (IETF ドラフト 10 で定義) を実装しました。モバイル版では、モバイル Firefox 7.0 で WebSocket がサポートされました。</p>

<h4 id="Gecko_6.0" name="Gecko_6.0">Gecko 6.0</h4>

<p>Gecko 6.0 {{geckoRelease("6.0")}} より前のバージョンでは誤って <code>WebSocket</code> オブジェクトが存在しており、一部のサイトが <code>WebSocket</code> サービスは接頭辞がつかないものであると考えていました。このオブジェクトは <code>MozWebSocket</code> に改名されました。</p>

<h4 id="Gecko_7.0" name="Gecko_7.0">Gecko 7.0</h4>

<p>Gecko 7.0 {{geckoRelease("7.0")}} より設定項目 <code>network.websocket.max-connections</code> が、一度に開くことができる WebSocket 接続の最大数を決めるために使用されます。この既定値は 200 です。</p>

<h4 id="Gecko_8.0" name="Gecko_8.0">Gecko 8.0</h4>

<p>Gecko 8.0 {{geckoRelease("8.0")}} より WebSocket プロトコルの deflate-stream 拡張が、ドラフト仕様で非推奨とされたため無効になりました。これは一部のサイトとの非互換問題を解決します。</p>

<h4 id="Gecko_11.0" name="Gecko_11.0">Gecko 11.0</h4>

<p>Gecko 11.0 より前は、受信および送信メッセージのサイズを 16MB に制限していました。このサイズを 2GB に引き上げることができます。ただし、(特にモバイルデバイスで) メモリ容量の制限によって、これはあくまで理論上の上限となり、実用上の上限とはなりません。実際、十分なメモリを持たないデバイスでは、大きなサイズのメッセージの転送が失敗します。</p>

<p>加えて、バイナリデータ向けに ArrayBuffer の送信と受信のサポートを実装しました。</p>

<p>Gecko 11.0 より、 WebSocket API に接頭辞が付かなくなりました。</p>