<p>« <a href="/ja/docs/Web/CSS">CSS</a> « <a href="/ja/docs/Web/CSS/Understanding_z_index">CSS の z-index の理解</a></p>

<h2 id="Stacking_context_example_2" name="Stacking_context_example_2">重ね合わせ文脈の例 2</h2>

<p>これはとても簡単な例ですが、<em>重ね合わせ文脈</em>の概念を理解するカギになります。前の例には同じ 4 つの DIV 要素がありましたが、今度は両方の階層構造で <code>z-index</code> プロパティが設定されています。</p>

<p>{{ EmbedLiveSample('Example_source_code', '352', '270', '', 'Web/Guide/CSS/Understanding_z_index/Stacking_context_example_2') }}</p>

<p>DIV #2 (z-index: 2) が DIV #3 (z-index: 1) よりも上にあることがわかります。これは、どちらも同じ重ね合わせ文脈（ルートのもの）に属していて、z-index 値が要素の重なり方を決めているからです。</p>

<p>変に思えるかもしれないのは、<code>z-index</code> の値に関わらず、DIV #2 (z-index: 2) が DIV #4 (z-index: 10) よりも上にあることです。この理由は、これらの要素が同一の重ね合わせ文脈に属していないためです。DIV #4 は DIV #3 によって作られた重ね合わせ文脈に所属していて、以前の説明にあるように DIV #3 (とその内部にあるものすべて) は DIV #2 よりも下にあります。</p>

<p>状況をもっとよく理解するために、重ね合わせ文脈の階層構造をご覧ください:</p>

<ul>
 <li>ルートの重ね合わせ文脈
  <ul>
   <li>DIV #2 (z-index 2)</li>
   <li>DIV #3 (z-index 1)
    <ul>
     <li>DIV #4 (z-index 10)</li>
    </ul>
   </li>
  </ul>
 </li>
</ul>

<div class="note"><strong>メモ:</strong> 一般に、 HTML の階層構造は重ね合わせ文脈の階層構造と異なることを忘れないほうが良いでしょう。重ね合わせ文脈の階層構造では、重ね合わせ文脈を作らない要素はその親要素に吸収されます。</div>

<h2 id="Example_source_code" name="Example_source_code"><strong>ソースコード例</strong></h2>

<pre class="brush:html">&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;&lt;style&gt;

div { font: 12px Arial; }

span.bold { font-weight: bold; }

#div2 { z-index: 2; }
#div3 { z-index: 1; }
#div4 { z-index: 10; }

#div1,#div3 {
   height: 80px;
   position: relative;
   border: 1px dashed #669966;
   background-color: #ccffcc;
   padding-left: 5px;
}

#div2 {
   opacity: 0.8;
   position: absolute;
   width: 150px;
   height: 200px;
   top: 20px;
   left: 170px;
   border: 1px dashed #990000;
   background-color: #ffdddd;
   text-align: center;
}

#div4 {
   opacity: 0.8;
   position: absolute;
   width: 200px;
   height: 70px;
   top: 65px;
   left: 50px;
   border: 1px dashed #000099;
   background-color: #ddddff;
   text-align: left;
   padding-left: 10px;
}


&lt;/style&gt;&lt;/head&gt;

&lt;body&gt;

    &lt;br /&gt;

    &lt;div id="div1"&gt;&lt;br /&gt;
        &lt;span class="bold"&gt;DIV #1&lt;/span&gt;&lt;br /&gt;
        position: relative;
        &lt;div id="div2"&gt;&lt;br /&gt;
            &lt;span class="bold"&gt;DIV #2&lt;/span&gt;&lt;br /&gt;
            position: absolute;&lt;br /&gt;
            z-index: 2;
        &lt;/div&gt;
    &lt;/div&gt;

    &lt;br /&gt;

    &lt;div id="div3"&gt;&lt;br /&gt;
        &lt;span class="bold"&gt;DIV #3&lt;/span&gt;&lt;br /&gt;
        position: relative;&lt;br /&gt;
        z-index: 1;
        &lt;div id="div4"&gt;&lt;br /&gt;
            &lt;span class="bold"&gt;DIV #4&lt;/span&gt;&lt;br /&gt;
            position: absolute;&lt;br /&gt;
            z-index: 10;
        &lt;/div&gt;
    &lt;/div&gt;

&lt;/body&gt;
&lt;/html&gt;
</pre>

<h2 id="See_also" name="See_also">関連情報</h2>

<ul>
 <li><a href="/ja/docs/CSS/Understanding_z-index/Stacking_without_z-index">z-index なしの重ね合わせ</a>: 既定の重ね合わせ規則</li>
 <li><a href="/ja/docs/CSS/Understanding_z-index/Stacking_and_float">重ね合わせと浮動要素</a>: 浮動要素が重ね合わせでどのように扱われるか</li>
 <li><a href="/ja/docs/CSS/Understanding_z-index/Adding_z-index">z-index の追加</a>: z-index を使って既定の重ね合わせ変更する方法</li>
 <li><a href="/ja/docs/CSS/Understanding_z-index/Stacking_context_example_1">重ね合わせ文脈の例 1</a>: 2階層の HTML 構造で、最終階層の z-index</li>
 <li><a href="/ja/docs/CSS/Understanding_z-index/Stacking_context_example_2">重ね合わせ文脈の例 2</a>: 2階層の HTML 構造、全レベルの z-index</li>
 <li><a href="/ja/docs/CSS/Understanding_z-index/Stacking_context_example_3">重ね合わせ文脈の例 3</a>: 3階層の HTML 構造、第2階層の z-index</li>
</ul>

<div class="originaldocinfo">
<h2 id="Original_Document_Information" name="Original_Document_Information">原典情報</h2>

<ul>
 <li>原著者: Paolo Lombardi</li>
 <li>この記事は原著者が <a class="external" href="http://www.yappy.it">YappY</a> のためにイタリア語で書いた記事の英訳の邦訳です。<a class="external" href="http://creativecommons.org/licenses/by-sa/2.0/">Creative Commons: Attribution-Sharealike license</a> の条件に従う限り、全内容の共有を認めます。</li>
 <li>最終更新日: 2005年7月9日</li>
</ul>
</div>