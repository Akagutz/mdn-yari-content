<div>{{HTTPSidebar}} {{SeeCompatTable}}</div>

<p><span class="seoSummary">HTTP の <strong><code>Feature-Policy</code></strong> ヘッダーは、自身のフレームおよび文書内の {{HTMLElement("iframe")}} 要素で、ブラウザーの機能を使用することを許可または拒否する仕組みを提供します。</span></p>

<p>詳しくは、<a href="/ja/docs/Web/HTTP/Feature_Policy">機能ポリシー</a>の記事を参照してください。</p>

<table class="properties">
 <tbody>
  <tr>
   <th scope="row">ヘッダー種別</th>
   <td>{{Glossary("Response header", "レスポンスヘッダー")}}</td>
  </tr>
  <tr>
   <th scope="row">{{Glossary("Forbidden header name", "禁止ヘッダー名")}}</th>
   <td>はい</td>
  </tr>
 </tbody>
</table>

<h2 id="Syntax" name="Syntax">構文</h2>

<pre class="syntaxbox">Feature-Policy: &lt;directive&gt; &lt;allowlist&gt;</pre>

<dl>
 <dt>&lt;allowlist&gt;</dt>
 <dd>{{page("/ja/docs/Web/HTTP/Feature_Policy/Using_Feature_Policy", "allowlist")}}</dd>
</dl>

<h2 id="Directives" name="Directives">ディレクティブ</h2>

<dl>
 <dt>{{httpheader('Feature-Policy/ambient-light-sensor','ambient-light-sensor')}}</dt>
 <dd>現在の文書が、端末の周囲の環境における光量についての情報を、 {{DOMxRef("AmbientLightSensor")}} インターフェイスを通じて収集することを許可するかどうかを制御します。</dd>
 <dt>{{httpheader('Feature-Policy/autoplay','autoplay')}}</dt>
 <dd>現在の文書で {{domxref("HTMLMediaElement")}} インターフェイスによってメディアの自動再生をリクエストすることを許可するかどうかを制御します。このポリシーが有効であり、ユーザーによる操作がなかった場合、 {{domxref("HTMLMediaElement.play()")}} から返却された {{jsxref("Promise")}} が {{domxref("DOMException")}} で拒否されます。 {{HTMLELement("audio")}} および {{HTMLElement("video")}} 要素の <code>autoplay</code> 属性は無視されます。</dd>
 <dt>{{httpheader('Feature-Policy/accelerometer','accelerometer')}}</dt>
 <dd>現在の文書が、端末の加速度に関する情報を、 {{DOMxRef("Accelerometer")}} インターフェイスを通じて収集することを許可するかどうかを制御します。</dd>
 <dt>{{httpheader('Feature-Policy/camera', 'camera')}}</dt>
 <dd>現在の文書が動画入力機器を使用することを許可するかどうかを制御します。このポリシーが有効であれば、 {{domxref("MediaDevices.getUserMedia", "getUserMedia()")}} から返却された {{jsxref("Promise")}} が <code>NotAllowedError</code> で拒否されます。</dd>
 <dt>{{HTTPHeader('Feature-Policy/display-capture', 'display-capture')}}</dt>
 <dd>現在の文書が {{domxref("MediaDevices.getDisplayMedia", "getDisplayMedia()")}} メソッドを使用して画面の内容をキャプチャすることを許可するかどうかを制御します。このポリシーが有効であれば、表示内容をキャプチャする許可がない場合、 <code>getDisplayMedia()</code> から返却される Promise が <code>NotAllowedError</code> で拒否されます。</dd>
 <dt>{{httpheader('Feature-Policy/document-domain','document-domain')}}</dt>
 <dd>現在の文書が {{domxref("document.domain")}} を設定することを許可するかどうかを制御します。このポリシーが有効な場合、 {{domxref("document.domain")}} を設定しようとすると失敗し、 <code>SecurityError</code> の {{domxref("DOMException")}} が発生します。</dd>
 <dt>{{httpheader('Feature-Policy/encrypted-media', 'encrypted-media')}}</dt>
 <dd>現在の文書が <a href="/ja/docs/Web/API/Encrypted_Media_Extensions_API">Encrypted Media Extensions</a> API (EME) を使用することを許可するかどうかを制御します。このポリシーが有効であれば、 {{domxref("Navigator.requestMediaKeySystemAccess()")}} から返却された {{jsxref("Promise")}} が {{domxref("DOMException")}} で拒否されます。</dd>
</dl>

<dl>
 <dt>{{httpheader('Feature-Policy/fullscreen','fullscreen')}}</dt>
 <dd>現在の文書が {{domxref('Element.requestFullScreen()')}} を使用することを許可するかどうかを制御します。このポリシーが有効であれば、返却された {{jsxref('Promise')}} が {{jsxref('TypeError')}} で拒否されます。</dd>
 <dt>{{httpheader('Feature-Policy/geolocation','geolocation')}}</dt>
 <dd>現在の文書が {{domxref('Geolocation')}} インターフェイスを使用することを許可するかどうかを制御します。このポリシーが有効であれば、 {{domxref('Geolocation.getCurrentPosition','getCurrentPosition()')}} および {{domxref('Geolocation.watchPosition','watchPosition()')}} を呼び出すと、関数のコールバックが呼び出され、 {{domxref('PositionError')}} コードが <code>PERMISSION_DENIED</code> になります。</dd>
 <dt>{{httpheader('Feature-Policy/gyroscope','gyroscope')}}</dt>
 <dd>現在の文書が {{DOMxRef("Gyroscope")}} インターフェイスを通じて、端末の方向に関する情報を収集することを許可するかどうかを制御します。</dd>
 <dt>{{httpheader('Feature-Policy/magnetometer','magnetometer')}}</dt>
 <dd>現在の文書が {{DOMxRef("Magnetometer")}} インターフェイスを通じて、端末の方向に関する情報を収集することを許可するかどうかを制御します。</dd>
 <dt>{{httpheader('Feature-Policy/microphone','microphone')}}</dt>
 <dd>現在の文書がオーディオ入力端末を使用することを許可するかどうかを制御します。このポリシーが有効であれば、 {{domxref("MediaDevices.getUserMedia()")}} で返却された {{jsxref('Promise')}} が <code>NotAllowedError</code> で拒否されます。</dd>
 <dt>{{httpheader('Feature-Policy/midi', 'midi')}}</dt>
 <dd>現在の文書が <a href="/ja/docs/Web/API/Web_MIDI_API">Web MIDI API</a> を使用することを許可するかどうかを制御します。このポリシーが有効であれば、 {{domxref("Navigator.requestMIDIAccess()")}} から返却された {{jsxref("Promise")}} が {{domxref("DOMException")}} で拒否されます。</dd>
 <dt>{{httpheader('Feature-Policy/payment', 'payment')}}</dt>
 <dd>現在の文書が <a href="/ja/docs/Web/API/Payment_Request_API">Payment Request API</a> を使用することを許可するかどうかを制御します。このポリシーが有効であれば、 {{domxref("PaymentRequest()")}} コンストラクターが <code>SecurityError</code> の {{domxref("DOMException")}} を発生させます。</dd>
 <dt>{{httpheader('Feature-Policy/picture-in-picture', 'picture-in-picture')}}</dt>
 <dd>現在の文書が、該当する API を使用して Picture-in-Picture モードで動画を再生することを許可するかどうかを制御します。</dd>
 <dt>{{httpheader('Feature-Policy/speaker', 'speaker')}}</dt>
 <dd>現在の文書が何らかのメソッドで音声を再生することを許可するかどうかを制御します。</dd>
 <dt>{{httpheader('Feature-Policy/sync-xhr', 'sync-xhr')}}</dt>
 <dd>現在の文書が同期 {{DOMxRef("XMLHttpRequest")}} リクエストを行うことを許可するかどうかを制御します。</dd>
 <dt>{{httpheader('Feature-Policy/usb', 'usb')}}</dt>
 <dd>現在の文書が <a href="https://wicg.github.io/webusb/">WebUSB API</a> を使用することを許可するかどうかを制御します。</dd>
 <dt>{{httpheader('Feature-Policy/wake-lock', 'wake-lock')}}</dt>
 <dd>現在の文書が <a href="https://www.w3.org/TR/wake-lock/">Wake Lock API</a> を使用して、端末が省電力モードに入らないことを示すことを許可するかどうかを制御します。</dd>
 <dt>{{httpheader("Feature-Policy/webauthn", "webauthn")}}</dt>
 <dd>現在の文書が <a href="/ja/docs/Web/API/Web_Authentication_API">Web Authentication API</a> を使用して公開鍵資格情報を生成、格納、受け取りすることを許可するかどうかを制御します。</dd>
 <dt>{{httpheader('Feature-Policy/vr', 'vr')}} / <code>xr</code></dt>
 <dd>現在の文書が <a href="/ja/docs/Web/API/WebVR_API">WebVR API</a> を使用することを許可するかどうかを制御します。このポリシーが有効であれば、 {{domxref("Navigator.getVRDisplays()")}} から返却された {{jsxref("Promise")}} が {{domxref("DOMException")}} で拒否されます。</dd>
</dl>

<h2 id="Example" name="Example">例</h2>

<p>SecureCorp Inc. が、アプリケーションでバイブレーションと Geolocation API を無効にしたがっているとします。以下の機能ポリシーを設定する HTTP レスポンスヘッダーを配信することで実現できます。</p>

<pre>Feature-Policy: vibrate 'none'; geolocation 'none'</pre>

<p>オリジンのリストに <code>'none'</code> キーワードを指定すると、指定された機能がオリジンに関係なく、すべての閲覧コンテキストで無効になります。</p>

<h2 id="Specifications" name="Specifications">仕様書</h2>

<table class="standard-table">
 <thead>
  <tr>
   <th scope="col">仕様書</th>
   <th scope="col">状態</th>
   <th scope="col">備考</th>
  </tr>
 </thead>
 <tbody>
  <tr>
   <td>{{SpecName("Feature Policy","#feature-policy-http-header-field","Feature-Policy")}}</td>
   <td>{{Spec2("Feature Policy")}}</td>
   <td>初回定義</td>
  </tr>
 </tbody>
</table>

<h2 id="Browser_compatibility" name="Browser_compatibility">ブラウザーの互換性</h2>

<p>{{Compat("http.headers.Feature-Policy")}}</p>

<h2 id="See_also" name="See_also">関連情報</h2>

<ul>
 <li><a href="/ja/docs/Web/HTTP/Feature_Policy">機能ポリシー</a></li>
 <li><a href="/ja/docs/Web/HTTP/Feature_Policy/Using_Feature_Policy">機能ポリシーの使用</a></li>
 <li><a class="external external-icon" href="https://chrome.google.com/webstore/detail/feature-policy-tester-dev/pchamnkhkeokbpahnocjaeednpbpacop" rel="noopener">Feature-Policy Tester (Chrome Developer Tools extension)</a></li>
 <li>{{HTTPHeader("Content-Security-Policy")}}</li>
 <li>{{HTTPHeader("Referrer-Policy")}}</li>
</ul>