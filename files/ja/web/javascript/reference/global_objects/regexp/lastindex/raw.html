<div>{{JSRef}}</div>

<p><strong><code>lastIndex</code></strong> は、次のマッチの始まりの位置を示す、正規表現インスタンスの読み書き可能な整数値のプロパティです。</p>

<div>{{EmbedInteractiveExample("pages/js/regexp-lastindex.html")}}</div>

<div>{{js_property_attributes(1, 0, 0)}}</div>

<h2 id="構文">構文</h2>

<pre class="syntaxbox"><code><var>regExpObj</var>.lastIndex</code></pre>

<h2 id="説明">説明</h2>

<p>このプロパティは、正規表現が、グローバルサーチを示す "<code>g</code>" を使用した場合にのみ、セットされます。 or the <code>"y"</code> flag to indicate a sticky search. 以下のルールが適用されます。:</p>

<ul>
 <li><code>lastIndex</code> が文字列の長さよりも大きければ、{{jsxref("RegExp.prototype.test()", "test()")}} 及び {{jsxref("RegExp.prototype.exec()", "exec()")}} は失敗し、<code>lastIndex</code> は 0 にセットされます。</li>
 <li><code>lastIndex</code> が文字列の長さと等しく、かつ、正規表現が空文字列にマッチする場合には、正規表現は <code>lastIndex</code> の始まりの入力にマッチします。</li>
 <li><code>lastIndex</code> が文字列の長さと等しく、かつ、正規表現が空文字列にマッチしない場合、正規表現は入力にマッチせず、<code>lastIndex</code> は 0 にリセットされます。</li>
 <li>それ以外の場合は、<code>lastIndex</code> は直近のマッチに続く次の位置にセットされます。</li>
</ul>

<h2 id="例">例</h2>

<h3 id="lastIndex_の使用"><code>lastIndex</code> の使用</h3>

<p>例えば、以下の連続した処理を考えてみてください。:</p>

<pre class="brush: js">var re = /(hi)?/g;
</pre>

<p>空文字列にマッチします。</p>

<pre class="brush: js">console.log(re.exec('hi'));
console.log(re.lastIndex);
</pre>

<p><code>lastIndex</code> が 2 になり<code>["hi", "hi"]</code> が返ります。</p>

<pre class="brush: js">console.log(re.exec('hi'));
console.log(re.lastIndex);
</pre>

<p><code>["", undefined]</code> という空配列が返り、その配列のゼロ番目の要素がマッチした文字列です。この場合では、<code>lastIndex</code> が 2 (かつ、いまだに 2 である) であったときに、"<code>hi</code>" の長さが 2 であるので、空文字列です。</p>

<h2 id="仕様">仕様</h2>

<table class="standard-table">
 <tbody>
  <tr>
   <th scope="col">仕様</th>
   <th scope="col">ステータス</th>
   <th scope="col">コメント</th>
  </tr>
  <tr>
   <td>{{SpecName('ES3')}}</td>
   <td>{{Spec2('ES3')}}</td>
   <td>初期定義。JavaScript 1.2 で実装。JavaScript 1.5: <code>lastIndex</code> は {{jsxref("RegExp")}} インスタンスのプロパティになり、{{jsxref("RegExp")}} オブジェクトのプロパティではなくなった。</td>
  </tr>
  <tr>
   <td>{{SpecName('ES5.1', '#sec-15.10.7.5', 'RegExp.lastIndex')}}</td>
   <td>{{Spec2('ES5.1')}}</td>
   <td> </td>
  </tr>
  <tr>
   <td>{{SpecName('ES6', '#sec-properties-of-regexp-instances', 'RegExp.lastIndex')}}</td>
   <td>{{Spec2('ES6')}}</td>
   <td> </td>
  </tr>
  <tr>
   <td>{{SpecName('ESDraft', '#sec-properties-of-regexp-instances', 'RegExp.lastIndex')}}</td>
   <td>{{Spec2('ESDraft')}}</td>
   <td> </td>
  </tr>
 </tbody>
</table>

<h2 id="ブラウザ実装状況">ブラウザ実装状況</h2>

<div>
<div class="hidden">The compatibility table on this page is generated from structured data. If you'd like to contribute to the data, please check out <a href="https://github.com/mdn/browser-compat-data">https://github.com/mdn/browser-compat-data</a> and send us a pull request.</div>

<p>{{Compat("javascript.builtins.RegExp.lastIndex")}}</p>
</div>

<h2 id="関連項目">関連項目</h2>

<ul>
 <li>{{jsxref("RegExp.prototype.ignoreCase")}}</li>
 <li>{{jsxref("RegExp.prototype.global")}}</li>
 <li>{{jsxref("RegExp.prototype.multiline")}}</li>
 <li>{{jsxref("RegExp.prototype.source")}}</li>
 <li>{{jsxref("RegExp.prototype.sticky")}}</li>
</ul>