<h3 id=".E7.A1.AC.E4.BB.B6.E8.A6.81.E6.B1.82" name=".E7.A1.AC.E4.BB.B6.E8.A6.81.E6.B1.82">硬件要求</h3>
<p>没有特别的硬件要求, provided that the hardware accommodates all of the <a href="#Software_Requirements">software</a> required to build Mozilla. Mozilla can take a very long time to build, so recommended development systems are listed alongside the minimum requirements.</p>
<ul>
 <li><b>Processor:</b> PowerPC G3 or later, PowerPC G5 or Intel CPUs recommended. Mozilla can now be built for either type of processor, or as a universal binary for both types (see <a href="cn/Mac_OS_X_Universal_Binaries">Mac OS X Universal Binaries</a>).</li>
 <li><b>Memory:</b> 256MB RAM minimum, 1GB recommended.</li>
 <li><b>Disk Space:</b> At least 1GB of free disk space for non-debug builds; development/debug builds require at least 2.5GB of free disk space.</li>
</ul>
<h3 id=".E8.BD.AF.E4.BB.B6.E8.A6.81.E6.B1.82" name=".E8.BD.AF.E4.BB.B6.E8.A6.81.E6.B1.82">软件要求</h3>
<ul>
 <li><b>操作系统：</b> Mac OS X 10.3.9或更高，建议升级到最新的发行版本（当前为10.3.9与10.4.8），可以通过运行苹果菜单中的软件来升级。Mozilla不能在10.1（“Puma”）中生成或运行。Mozilla的1.8.0与1.8.1分支版本可以在Mac OS X 10.2（“Jaguar”）中运行，但是至少需要在10.3（“Panther”）中生成。Beginning with Mozilla 1.9 (the current trunk), Mac OS X 10.3 is required at runtime, too.更多的细节，请参考<a class="external" href="http://wiki.mozilla.org/Mac:Build_Requirements#Compatibility_Matrix">Mac兼容列表</a>.</li>
</ul>
<p>要安装下面要求的软件，你可能需要系统管理员的权限。</p>
<ul>
 <li><b>Development Environment:</b> <a class="external" href="http://developer.apple.com/tools/xcode/">Xcode Tools</a> 1.5 or later. Earlier versions of Xcode and Developer Tools are no longer supported. Xcode 2.0 is not recommended, but Xcode 2.1 and later work properly. Tested Xcode configurations are listed in the <a class="external" href="http://wiki.mozilla.org/Mac:Build_Requirements#Compatibility_Matrix">Mac compatibility matrix</a>. Installing the cross-development environments (SDKs) is recommended. These are selected by clicking the “Customize” button in the Xcode installer. There are two ways to obtain or upgrade Xcode:
  <ul>
   <li>
    <i>
     Download:</i>
    <a class="external" href="http://developer.apple.com/tools/download/">Download Xcode</a> from Apple. This ensures that you’ll install the latest version of the tools available for your computer. You’ll need a (free) <a class="external" href="http://connect.apple.com/">Apple Developer Connection</a> membership. Note that Xcode updates are not installed by Software Update at this time.</li>
   <li>
    <i>
     DVD or CD:</i>
    Most Macs and retail versions of Mac OS X include an Xcode installer on the installation discs. Check your discs for Xcode or Developer Tools.</li>
  </ul>
 </li>
 <li><b>Package Management:</b> A package management system is not strictly required, but simplifies the installation of additional build dependencies. There are two package management systems that are compatible with the Mozilla build system, Fink and DarwinPorts (MacPorts). Note that package installation may be a time-consuming but automated process using either tool.
  <ul>
   <li>
    <i>
     <a class="external" href="http://fink.sourceforge.net/">Fink</a></i>
    . You may <a class="external" href="http://fink.sourceforge.net/download/index.php">download</a> the most recent version of Fink that is compatible with your operating system release. Fink installs in <code>/sw</code> by default. The installer should configure the Fink environment for you, making it available in any new Terminal window. If you perform a major operating system upgrade on your computer, such as an upgrade from Jaguar to Panther, you should remove the <code>/sw</code> directory and re-install Fink and the packages below.</li>
   <li>
    <i>
     <a class="external" href="http://darwinports.opendarwin.org/">DarwinPorts</a></i>
    , from the <a class="external" href="http://www.opendarwin.org/">OpenDarwin project</a>, soon to be renamed MacPorts. You may <a class="external" href="http://darwinports.opendarwin.org/getdp/">download</a> the DarwinPorts installer corresponding to your operating system release. DarwinPorts installs in <code>/opt/local</code> by default. After running the DarwinPorts installer, the changes that it makes to the shell environment will be available in any new Terminal window.</li>
  </ul>
 </li>
 <li><b><a class="external" href="http://andrewtv.org/libIDL/">libIDL</a></b> and <b><a class="external" href="http://www.gtk.org/">GLib</a></b>, libraries used by Mozilla’s IDL (interface definition language) file parser. These may be installed using a package manager. Administrative privileges are required, provide your password to the <code>sudo</code> command if requested.
  <ul>
   <li>Using
    <i>
     Fink</i>
    . libIDL is included in the ORBit installation.
    <pre>$ sudo apt-get update
$ sudo apt-get install orbit orbit-dev glib</pre>
   </li>
   <li>Using
    <i>
     DarwinPorts</i>
    (MacPorts). Installing libIDL also installs GLib.
    <pre>$ sudo port sync
$ sudo port install libidl</pre>
   </li>
  </ul>
 </li>
 <li>The <b>Shared Menus Cocoa Framework</b> is only required to build <a class="external" href="http://www.caminobrowser.org/">Camino</a>. <a class="link-ftp" href="ftp://ftp.url-manager.com/pub/SharedMenusCocoa.dmg.bin">Download</a> the SharedMenusCocoa disk image, extracting it using <a class="external" href="http://www.stuffit.com/mac/expander/">StuffIt Expander</a> if necessary, and copy the <code>SharedMenusCocoa.framework</code> folder from inside the <code>SharedMenusCocoa/build</code> folder to <code>/Library/Frameworks</code>. Be sure to look inside the <code>SharedMenusCocoa</code> folder and then inside the <code>build</code> folder to find <code>SharedMenusCocoa.framework</code>. If you copy another folder with a similar name instead, your Camino build will not succeed. See the detailed <a class="external" href="http://www.caminobrowser.org/development/build/">Camino-specific build instructions</a> for more information.</li>
 <li><b><a class="external" href="http://www.gnu.org/software/autoconf/">autoconf</a> version 2.13</b> is only needed if you plan on making changes to the Mozilla configure scripts. Newer versions of autoconf, including those that are included with Xcode and installed in <code>/usr/bin</code>, are incompatible with Mozilla ({{ Bug(104642) }}).
  <ul>
   <li>Using
    <i>
     Fink</i>
    . autoconf is installed at <code>/sw/bin/autoconf</code>. Do not install the <code>autoconf2.5</code> or <code>autoconf2.54</code> packages.
    <pre>$ sudo apt-get install autoconf</pre>
   </li>
   <li>Using
    <i>
     DarwinPorts</i>
    (MacPorts). autoconf is installed at <code>/opt/local/bin/autoconf213</code>. You will need to type <code>autoconf213</code> to run it when other documentation might instruct you to run <code>autoconf</code>. Do not install the <code>autoconf</code> package without the <code>213</code> suffix.
    <pre>$ sudo port install autoconf213</pre>
   </li>
  </ul>
 </li>
</ul>
<h3 id=".mozconfig.E8.AE.BE.E7.BD.AE.E5.92.8C.E5.85.B6.E5.AE.83.E5.8F.AF.E8.B0.83.E9.80.89.E9.A1.B9" name=".mozconfig.E8.AE.BE.E7.BD.AE.E5.92.8C.E5.85.B6.E5.AE.83.E5.8F.AF.E8.B0.83.E9.80.89.E9.A1.B9">.mozconfig设置和其它可调选项</h3>
<p>These options are specific to Mozilla builds for Mac OS X. For a more general overview of build options and the <code>.mozconfig</code> file, see <a href="cn/Configuring_Build_Options">Configuring Build Options</a>. For specific information on configuring to build a universal binary, see <a href="cn/Mac_OS_X_Universal_Binaries">Mac OS X Universal Binaries</a>.</p>
<ul>
 <li><b>Compiler:</b> If you are using Mac OS X 10.4 (“Tiger”) or later on PowerPC, you should change the system default compiler to gcc 3.3, the compiler used to produce official PowerPC builds. Use the following command:
  <pre>$ sudo gcc_select 3.3</pre>
  <p>As an alternative to changing the system default compiler, you may specify the compiler to use for a Mozilla build at configure time by setting the <code>CC</code> and <code>CXX</code> environment variables to select your desired C and C++ compilers. You can enter these commands in the Terminal before starting a Mozilla build, or you can place them in your <code>.mozconfig</code> file:</p>
  <pre>export CC=gcc-3.3
export CXX=g++-3.3</pre>
  <p>Mozilla will build with gcc 4.0 (provided that Xcode 2.1 or later is installed), and some developers prefer this newer compiler. Applications built using gcc 4.0 will only run on Mac OS X 10.3.9 and later. Official Intel builds are produced with gcc 4.0. <b>Intel builds must be produced with gcc 4.0</b> (Apple's gcc 3.3 cannot produce Intel binaries), but you can use gcc 3.3 on an Intel Mac to <a href="cn/Mac_OS_X_Universal_Binaries#Cross-Compilation">cross-compile</a> for PPC.</p>
  Be aware that the gcc 3.3 compiler for Mac OS X at optimization level <code>-O3</code> is unable to build Mozilla, and that any compiler with the <code>-fast</code> optimization mode selected on PowerPC will result in a build failure.</li>
</ul>
<p>The following options, specified with <code>ac_add_options</code>, are lines that are intended to be added to your <code>.mozconfig</code> file.</p>
<ul>
 <li><b>Mac OS X SDK:</b> This selects the version of the system headers and libraries to build against, ensuring that the product you build will be able to run on older systems with less complete APIs available. Selecting an SDK with this option overrides the default headers and libraries in <code>/usr/include</code>, <code>/usr/lib</code>, and <code>/System/Library</code>. Mac OS X SDKs are installed in <code>/Developer/SDKs</code> during the <a href="#Software_Requirements">Xcode installation</a> by selecting the <b>Cross Development</b> category in the installer’s <b>Customize</b> screen.
  <pre>ac_add_options --with-macos-sdk=/path/to/SDK</pre>
  <p>Official PowerPC builds use <code>/Developer/SDKs/MacOSX10.3.9.sdk</code> on the trunk, and <code>/Developer/SDKs/MacOSX10.2.8.sdk</code> on the 1.8.0 and 1.8.1 branches. Note that there is no <code>MacOSX10.3.9.sdk</code> in Xcode 1.5 on Mac OS X 10.3, and if you are using Xcode 1.5, you will need to use <code>MacOSX10.3.0.sdk</code> instead.</p>
  <p>Official Intel builds have used and will continue to use <code>/Developer/SDKs/MacOSX10.4u.sdk</code>.</p>
  <p>Note that some frameworks (notably AppKit) behave differently at runtime depending on which SDK was used at build time. This may be the source of bugs that only appear on certain platforms or in certain builds.</p>
  <p><b>You will not be able to build Mozilla using the 10.2.8 SDK included in the Xcode 2.4 installer. If you install Xcode 2.4, please see the <a href="#Troubleshooting">troubleshooting</a> section for a workaround.</b></p>
  Use of an SDK is highly recommended, especially when building on Mac OS X 10.3 with Xcode 1.5.</li>
 <li><b>Deployment Target:</b> This option selects the minimum OS version that the resulting application will run on. Proper use of this option requires additional support in the code.
  <pre>ac_add_options --enable-macos-target=version</pre>
  This option is not recommended. The default for PowerPC builds on the trunk is <code>10.3</code>; the 1.8.0 and 1.8.1 branches use <code>10.2</code>. The default for Intel builds is <code>10.4</code>. Official builds use these defaults.</li>
 <li><b><a class="external" href="http://developer.apple.com/releasenotes/DeveloperTools/Prebinding.html">Prebinding</a>:</b> The Mozilla build system allows you to build an application and libraries that are prebound. This improves application launch time on Mac OS X 10.3.3 and earlier.
  <pre>ac_add_options --enable-prebinding</pre>
  The default is to not prebind. Official PowerPC builds are prebound. Official Intel builds are not prebound, as no Intel build will run on any release earlier than 10.4.</li>
 <li><b>Sample <code>.mozconfig</code>:</b> This <code>.mozconfig</code> file is suitable to build a PowerPC version of Minefield (equivalent to Firefox) able to run on the widest possible range of computers. This may be used on any PowerPC Mac meeting the <a href="#Software_Requirements">software requirements</a>:
  <pre>export CC=gcc-3.3
export CXX=g++-3.3
. $topsrcdir/browser/config/mozconfig
ac_add_options --with-macos-sdk=/Developer/SDKs/MacOSX10.3.9.sdk
ac_add_options --enable-prebinding
ac_add_options --disable-tests</pre>
  <p>This <code>.mozconfig</code> file is suitable to build an Intel version of Minefield (equivalent to Firefox), which will only run on Intel-based Macs running Mac OS X 10.4 or newer:</p>
  <pre>. $topsrcdir/browser/config/mozconfig
ac_add_options --with-macos-sdk=/Developer/SDKs/MacOSX10.4u.sdk
ac_add_options --disable-tests</pre>
 </li>
</ul>
<h3 id="Build_Defines" name="Build_Defines">Build Defines</h3>
<p>For Mac OS X builds, defines are set up as follows:</p>
<ul>
 <li><code>XP_MACOSX</code> is defined</li>
 <li><code>XP_UNIX</code> is defined</li>
 <li><code>XP_MAC</code> is <b>not</b> defined. <code>XP_MAC</code> is obsolete and is slowly being removed from the source tree (see {{ Bug(281889) }}). It was used for CFM (non-Mach-O) builds for the classic (pre-X) Mac OS.</li>
</ul>
<p>This requires care when writing code for Unix platforms that exclude Mac:</p>
<pre>#if defined(XP_UNIX) &amp;&amp; !defined(XP_MACOSX)</pre>
<h3 id="Troubleshooting" name="Troubleshooting">Troubleshooting</h3>
<p>The 10.2.8 SDK included in Xcode 2.4 (build 8K1079) contains a bug that prevents Mozilla from building with that SDK. Apple has been notified of this bug, which is being tracked as Radar 4671592. Apple has fixed as of Xcode 2.4.1.&lt;/li&gt;</p>
<ul>
 <li><b>After installing Xcode 2.4, the build fails in <code>nsLookAndFeel.cpp</code> with:<br>
  <code>error: `kThemeBrushAlternatePrimaryHighlightColor' undeclared (first use this function)</code>.</b></li>
 <li><b>After installing QuickTime 7.0.4 on Mac OS X 10.3.9, the build fails in <code>libwidget_mac.dylib</code> with:<br>
  <code>ld: /usr/lib/gcc/darwin/3.3/libstdc++.a(eh_personality.o) illegal reference to symbol: ___cxa_begin_catch defined in indirectly referenced dynamic library /usr/lib/libstdc++.6.dylib</code>.</b> &lt;p&gt;To work around this conflict, you will need to use an SDK. Select the <code>MacOSX10.2.8.sdk</code> (recommended), or, if you must, you can also use <code>MacOSX10.3.0.sdk</code>. See the section on <a href="#.mozconfig_Options_and_Other_Tunables">.mozconfig Options and Other Tunables</a> for detailed instructions on using an SDK.
  <p>Apple linked the QuickTime 7.0.4 framework against the shared libstdc++.6 library available in Mac OS X 10.3.9 and later, but the compiler (gcc 3.3) and build tools used on these systems do not expect to link against this library. gcc 3.3 expects to use its own statically-linked libstdc++. The QuickTime stub frameworks in the SDKs do not share this problem.</p>
 </li>
 <li><b>QuickTime SDK Update:</b> If you install or update QuickTime 7, you may also need to install an updated QuickTime SDK, available from “Software Update” in the Apple menu. This update is only needed if Software Update indicates that it is available to you. You will need this update if your build fails because it is unable to find <code>Sound.r</code>.</li>
 <li><b>Using
  <i>
   Fink,</i>
  you get <code>apt-get: command not found</code>.</b>
  <p><code>apt-get</code> is not in your <code>$PATH</code>. Close and reopen Terminal and try again. If the error persists, Fink was unable to fully configure itself in your environment. Take these steps:</p>
  <ul>
   <li>If you use the <code>bash</code> shell, the default since Mac OS X 10.3, edit your <code>~/.bashrc</code> file, adding the following line. Don’t neglect the leading period and space.
    <pre>. /sw/bin/init.sh</pre>
   </li>
   <li>If you use the <code>tcsh</code> shell, edit your <code>~/.tcshrc</code> file, adding the following line:
    <pre>source /sw/bin/init.csh</pre>
   </li>
   <li>After modifying the appropriate file, close and reopen Terminal and try again.</li>
  </ul>
 </li>
</ul>
<ul>
 <li><b>Using
  <i>
   DarwinPorts</i>
  (MacPorts), you get <code>port: command not found</code>.</b>
  <p><code>port</code> is not in your <code>$PATH</code>. Close and reopen Terminal and try again. If the error persists, DarwinPorts was unable to fully configure itself in your environment. Take these steps:</p>
  <ul>
   <li>If you use the <code>bash</code> shell, the default since Mac OS X 10.3, edit your <code>~/.bashrc</code> file, adding the following line:
    <pre>export PATH="/opt/local/bin:/opt/local/sbin:$PATH"</pre>
   </li>
   <li>If you use the <code>tcsh</code> shell, edit your <code>~/.tcshrc</code> file, adding the following line:
    <pre>setenv PATH "/opt/local/bin:/opt/local/sbin:$PATH"</pre>
   </li>
   <li>After modifying the appropriate file, close and reopen Terminal and try again.</li>
  </ul>
 </li>
 <li><b>Using Fink with Virex 7.2:</b> There is a conflict between Fink and Virex 7.2. Both place files within <code>/sw</code>. If you have Virex installed, you will need to upgrade to at least version 7.2.1, as described in the <a class="external" href="http://fink.sourceforge.net/news/index.php#2003-04-16%20Virex%20problem%20resolved">Fink News (2003-04-16)</a>.</li>
 <li><b>The build stops while building <code>libwidget.rsrc</code> in <code>widget/src/mac</code></b>
  <p>Delete, or rename <code>~/Library/Preferences/.GlobalPreferences.plist</code>. We're not quite sure what setting in that file is causing this problem. Note that if you remove this file, system preferences such as preferred locales and recent programs will also disappear.</p>
 </li>
 <li><b>The build complains about missing IDL headers:</b> Make sure you installed the orbit distribution via Fink's <code>apt-get</code>, and that you edited your <code>.bashrc</code> to source the <code>/sw/bin/init.sh</code> file or your <code>.tcshrc</code> file to source the <code>/sw/bin/init.csh</code> file.</li>
 <li><b>The build complains that some Shared Menus header is missing:</b> Check that the <code>SharedMenusCocoa.framework</code> in installed in <code>/Library/Frameworks</code>, and that the symlinks inside the framework are OK.</li>
 <li><b>Can't find <code>dlfcn.h</code> with error <code>nsTraceRefcnt.cpp:68: dlfcn.h: No such file or directory</code></b>
  <p>Make sure you have the libdl.dylib from Fink. If you install <a class="external" href="http://www.apple.com/downloads/macosx/unix_apps_utilities/bashthegnubourneagainshell.html">bash from Apple</a>, it will provide a copy of libdl.dylib which will not come with the headers (eg. dlfcn.h) needed to compile new programs that use the library, such as Mozilla. The solution is to remove the bash from Apple and install the bash from Fink. (Thanks to <a class="link-mailto" href="mailto:am2stewa@uwaterloo.ca">Alex Stewart</a> for helping us track this down.)</p>
 </li>
 <li>{{ languages( { "fr": "fr/Pr\u00e9alables_\u00e0_la_compilation_sous_Mac_OS_X", "ja": "ja/Mac_OS_X_Build_Prerequisites" } ) }}</li>
</ul>