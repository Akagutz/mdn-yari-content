<p id="Mercurial_Bundles">如果你的网络不稳定, <code>hg clone</code> 不能顺利的下载源码, 你可以通过 bundle of the repository 下载源码,这种方式可以让你断点续传源码,当然之后你也能时刻保持最新的源码.</p>

<h2 id="下载_a_bundle">下载 a bundle</h2>

<p><a class="external" href="https://hg.mozilla.org/" title="http://hg.mozilla.org/">https://hg.mozilla.org/</a> 最新的 bundles 文件都放在这里 <a href="https://hg.cdn.mozilla.net/">https://hg.cdn.mozilla.net/.</a></p>

<p>推荐使用 gzip 格式, 当然其他格式也是可以的(译者注: zstd 格式虽然文件最小, 可能需要额外配置mercurial) .</p>

<h2 id="搭建本地代码仓库">搭建本地代码仓库</h2>

<p>假设你已经下好了 bundle 文件,存放位置为 /path/to/your/xxxx.gzip-v2.hg  ,仓库目录为mozilla-central  ,注意根据实际文件位置进行操作</p>

<p>1. 创建新的仓库,假设仓库文件夹为 <code>mozilla-central ,</code>敲击命令:</p>

<pre>mkdir mozilla-central
hg init mozilla-central
</pre>

<p>2. 导入 bundle 文件到仓库<code>,</code>敲击命令:</p>

<pre>cd mozilla-central
hg unbundle /path/to/your/xxxx.gzip-v2.hg</pre>

<p>在这里需要花费一些时间,请耐心等候.</p>

<p>3. 配置仓库更新地址,敲击命令:</p>

<pre><code>hg config --local</code></pre>

<p>在这里你可能需要输入选项选择编辑器,也可以重新输入 select-editor 命令重新选择.</p>

<p>在打开的编辑器里,或者编辑mozilla-central/.hg/hgrc ,编辑其内容为:</p>

<pre>[paths]
default = https://hg.mozilla.org/mozilla-central/</pre>

<p>4. 获取、检验、保持最新源代码 ,执行命令:</p>

<pre>hg pull</pre>

<p>5. 检出(导出)源码:</p>

<pre>hg update</pre>

<p id="UnifiedRepo">现在你已经复制了 <code>mozilla-central</code> 的代码,跟<code> hg clone </code>的效果是一样的. 你可以 <a href="/en-US/docs/Simple_Firefox_build#Build_configuration_(optional)">adjust your build settings</a>, 或者 <a href="/en-US/docs/Simple_Firefox_build#Building">build Firefox </a>了!</p>

<h2 id="UnifiedRepo" name="UnifiedRepo">另参见</h2>

<ul>
 <li><a href="/en-US/docs/Mozilla/Developer_guide">Developer Guide</a></li>
 <li><a href="/en-US/docs/Simple_Firefox_build">Simple Firefox build</a></li>
</ul>