<p>{{ ApiRef() }} {{Non-standard_header}}</p>

<p>在一个用户被提示”安装“一个网站到移动设备的一个主屏幕之前,  <code><strong>BeforeInstallPromptEvent </strong></code> 被{{domxref("Window.onbeforeinstallprompt")}} 处理程序触发。</p>

<p>该接口继承自{{domxref("Event")}}接口。</p>

<p>{{InheritanceDiagram(700, 60, 20)}}</p>

<h2 id="Constructor">Constructor</h2>

<dl>
 <dt>{{domxref("new window.BeforeInstallPromptEvent(name, eventInitOptions)")}}</dt>
 <dd>Creates a new <code><strong>BeforeInstallPromptEvent</strong></code>.</dd>
</dl>

<h2 id="Properties">Properties</h2>

<p><em>Inherits properties from its parent, {{domxref("Event")}}.</em></p>

<dl>
 <dt>{{domxref("BeforeInstallPromptEvent.platform")}} {{readonlyinline}}</dt>
 <dd>Returns a {{domxref("DOMString")}} containing the platform on which the event was dispatched.</dd>
 <dt>{{domxref("BeforeInstallPromptEvent.userChoice")}} {{readonlyinline}}</dt>
 <dd>Returns a {{jsxref("Promise")}} that resolves to a {{domxref("DOMString")}} containing either 'installed' or 'dismissed'.</dd>
</dl>

<h2 id="Methods">Methods</h2>

<dl>
 <dt>{{domxref("BeforeInstallPromptEvent.prompt()")}} </dt>
 <dd>Allows a developer to show the install prompt at a time of their own choosing. This method returns a  {{jsxref("Promise")}}.</dd>
</dl>

<h2 id="Example">Example</h2>

<pre class="brush: js">window.addEventListener("beforeinstallprompt", function(e) { 
  // log the platforms provided as options in an install prompt 
  console.log(e.platforms); // e.g., ["web", "android", "windows"] 
  e.userChoice.then(function(outcome) { 
    console.log(outcome); // either "installed", "dismissed", etc. 
  }, handleError); 
});
</pre>

<h2 id="Browser_compatibility">Browser compatibility</h2>

<p>{{ CompatibilityTable() }}</p>

<div id="compat-desktop">
<table class="compat-table">
 <tbody>
  <tr>
   <th>Feature</th>
   <th>Chrome</th>
   <th>Firefox (Gecko)</th>
   <th>Internet Explorer</th>
   <th>Opera</th>
   <th>Safari</th>
  </tr>
  <tr>
   <td>Basic support</td>
   <td>
    <p>{{CompatChrome(44.0)}} [1]</p>
   </td>
   <td>{{ CompatNo() }}</td>
   <td>{{ CompatNo() }}</td>
   <td>{{ CompatNo() }}</td>
   <td>{{ CompatNo() }}</td>
  </tr>
  <tr>
   <td><code>prompt()</code> method.</td>
   <td>{{CompatChrome(45.0)}} [1]</td>
   <td>{{ CompatNo() }}</td>
   <td>{{ CompatNo() }}</td>
   <td>{{ CompatNo() }}</td>
   <td>{{ CompatNo() }}</td>
  </tr>
 </tbody>
</table>
</div>

<div id="compat-mobile">
<table class="compat-table">
 <tbody>
  <tr>
   <th>Feature</th>
   <th>Android</th>
   <th>Android Webview</th>
   <th>Firefox Mobile (Gecko)</th>
   <th>IE Mobile</th>
   <th>Opera Mobile</th>
   <th>Safari Mobile</th>
   <th>Chrome for Android</th>
  </tr>
  <tr>
   <td>Basic support</td>
   <td>{{ CompatNo() }}</td>
   <td>
    <p>{{CompatChrome(44.0)}} [1]</p>
   </td>
   <td>{{ CompatNo() }}</td>
   <td>{{ CompatNo() }}</td>
   <td>{{ CompatNo() }}</td>
   <td>{{ CompatNo() }}</td>
   <td>
    <p>{{CompatChrome(44.0)}} [1]</p>
   </td>
  </tr>
  <tr>
   <td><code>prompt()</code> method.</td>
   <td>{{ CompatNo() }}</td>
   <td>{{CompatChrome(45.0)}} [1]</td>
   <td>{{ CompatNo() }}</td>
   <td>{{ CompatNo() }}</td>
   <td>{{ CompatNo() }}</td>
   <td>{{ CompatNo() }}</td>
   <td>{{CompatChrome(45.0)}} [1]</td>
  </tr>
 </tbody>
</table>
</div>

<p>[1] <font face="Consolas, Liberation Mono, Courier, monospace">B</font>ehind the flag<em>chrome://flags/#bypass-app-banner-engagement-checks</em></p>