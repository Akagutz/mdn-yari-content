<div>{{APIRef("HTML DOM")}}</div>

<p><strong><code>HTMLInputElement.setSelectionRange </code></strong>方法可以从一个被 focused 的 {{HTMLElement("input")}} 元素中选中特定范围的内容。</p>

<p>在较新的浏览器中，你可以通过一个可选的 selectionDirection 来指定文本选中过程中的方向。比如通过点击和拖动从结束位置往起始位置选中一个字符串。</p>

<p>每次调用这个这个方法会更新 <code>HTMLInputElement 的 selectionStart</code>, <code>selectionEnd</code>,和 <code>selectionDirection</code> 属性。</p>

<h2 id="语法">语法</h2>

<pre class="syntaxbox">inputElement.setSelectionRange(<var>selectionStart</var>, <var>selectionEnd</var>, [optional] <var>selectionDirection</var>);
</pre>

<h3 id="参数">参数</h3>

<dl>
 <dt><em>selectionStart</em></dt>
 <dd>被选中的第一个字符的位置。</dd>
 <dt><em>selectionEnd</em></dt>
 <dd>被选中的最后一个字符的 <em>下一个</em> 位置。</dd>
 <dt><em>selectionDirection</em> (可选)</dt>
 <dd>一个指明选择方向的字符串，有"forward","backward"和"none" 3个可选值, 分别表示"从前往后", "从后往前"和"选择方向未知或不重要"。</dd>
</dl>

<h2 id="例子">例子</h2>

<p>以下代码:</p>

<pre class="brush: html">&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
&lt;meta charset=utf-8&gt;
&lt;title&gt;JS Bin&lt;/title&gt;
&lt;script&gt;
function SelectText () {
        var input = document.getElementById("mytextbox");
            input.focus();
            input.setSelectionRange(2,5);   // 选择特定部分
            input.setSelectionRange(0, -1); // 全选

}
&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;p&gt;&lt;input type="text" id="mytextbox" size="20" value="Mozilla"/&gt;&lt;/p&gt;
  &lt;p&gt;&lt;button onclick="SelectText()"&gt;Select text&lt;/button&gt;&lt;/p&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre>

<p>表现效果:</p>

<p><img alt="example.png" class="default internal" src="/@api/deki/files/6104/=example.png"></p>

<h2 id="规范">规范</h2>

<table class="standard-table">
 <thead>
  <tr>
   <th scope="col">规范</th>
   <th scope="col">状态</th>
   <th scope="col">评论</th>
  </tr>
 </thead>
 <tbody>
  <tr>
   <td>{{SpecName("HTML WHATWG", "forms.html#dom-textarea/input-setselectionrange", "HTMLInputElement.setSelectionRange()")}}</td>
   <td>{{Spec2("HTML WHATWG")}}</td>
   <td>No change</td>
  </tr>
  <tr>
   <td>{{SpecName("HTML5.1", "forms.html#dom-textarea/input-setselectionrange", "HTMLInputElement.setSelectionRange()")}}</td>
   <td>{{Spec2("HTML5.1")}}</td>
   <td>No change</td>
  </tr>
  <tr>
   <td>{{SpecName("HTML5 W3C", "forms.html#dom-textarea/input-setselectionrange", "HTMLInputElement.setSelectionRange()")}}</td>
   <td>{{Spec2("HTML5 W3C")}}</td>
   <td>Initial definition</td>
  </tr>
 </tbody>
</table>

<h2 id="浏览器兼容性">浏览器兼容性</h2>

<p>{{CompatibilityTable}}</p>

<div id="compat-desktop">
<table class="compat-table">
 <tbody>
  <tr>
   <th>特性</th>
   <th>Chrome</th>
   <th>Firefox (Gecko)</th>
   <th>Internet Explorer</th>
   <th>Opera</th>
   <th>Safari</th>
  </tr>
  <tr>
   <td>基础支持</td>
   <td>1.0</td>
   <td>{{CompatGeckoDesktop("1.0")}}</td>
   <td>9</td>
   <td>8.0</td>
   <td>{{CompatVersionUnknown}}</td>
  </tr>
  <tr>
   <td><code>selectionDirection</code></td>
   <td>15<sup>[1]</sup></td>
   <td>{{CompatGeckoDesktop("8.0")}}<sup>[2]</sup></td>
   <td>{{CompatUnknown}}</td>
   <td>{{CompatUnknown}}</td>
   <td>{{CompatVersionUnknown}}<sup>[3]</sup></td>
  </tr>
 </tbody>
</table>
</div>

<div id="compat-mobile">
<table class="compat-table">
 <tbody>
  <tr>
   <th>特性</th>
   <th>Android</th>
   <th>Firefox Mobile (Gecko)</th>
   <th>IE Mobile</th>
   <th>Opera Mobile</th>
   <th>Safari Mobile</th>
  </tr>
  <tr>
   <td>基础支持</td>
   <td>{{CompatUnknown}}</td>
   <td>{{CompatUnknown}}</td>
   <td>{{CompatUnknown}}</td>
   <td>{{CompatUnknown}}</td>
   <td>{{CompatUnknown}}</td>
  </tr>
  <tr>
   <td><code>selectionDirection</code></td>
   <td>{{CompatUnknown}}</td>
   <td>{{CompatGeckoMobile("8.0")}}<sup>[2]</sup></td>
   <td>{{CompatUnknown}}</td>
   <td>{{CompatUnknown}}</td>
   <td>{{CompatUnknown}}</td>
  </tr>
 </tbody>
</table>
</div>

<p>[1] Blink引擎在 {{WebkitBug("60403")}}中添加了对<code>selectionDirection</code>的支持。</p>

<p>请注意, 根据 <a href="https://html.spec.whatwg.org/multipage/forms.html#concept-input-apply">WHATWG forms spec表单规范</a> , 从chrome 33版本开始, chrome浏览器只支持获取type为text, search, URL, tel and password的input元素的<code>selectionStart</code>, <code>selectionEnd 和</code> <code>setSelectionRange</code> 属性, 在其余类型中尝试获取这些属性chrome会提示错误。 举例说明，当尝试对&lt;input type="number"&gt; 做上述操作时, chrome浏览器会提示以下错误信息: "Failed to read the 'selectionStart' property from 'HTMLInputElement': The input element's type ('number') does not support selection." 相关链接: <a href="http://stackoverflow.com/questions/21177489/selectionstart-selectionend-on-input-type-number-no-longer-allowed-in-chrome">question on StackOverflow</a>, <a href="https://www.w3.org/Bugs/Public/show_bug.cgi?id=24796">whatwg bug</a>, <a href="https://code.google.com/p/chromium/issues/detail?id=324360">Chromium bug</a>.</p>

<p>[2] Gecko引擎在 {{bug("674558")}}中添加了对<code>selectionDirection</code>的支持。</p>

<p>[3] Webkit引擎在 {{WebKitBug("60403")}}中添加了对<code>selectionDirection</code> 的支持。</p>

<h2 id="相关内容">相关内容</h2>

<ul>
 <li>{{HTMLElement("input")}}</li>
 <li>{{domxref("HTMLInputElement")}}</li>
 <li>{{domxref("Selection")}}</li>
</ul>