<p> </p>

<p><a href="/en-US/docs/Web/API/Web_Speech_API">Web Speech API</a>中的<strong><code>SpeechRecognition</code></strong><code>介面是一個recognition service的控制器介面。他同時也負責處理由識別服務發出的</code>{{domxref("SpeechRecognitionEvent")}}事件。</p>

<h2 id="建構子">建構子</h2>

<dl>
 <dt>{{domxref("SpeechRecognition.SpeechRecognition()")}}</dt>
 <dd><code><font face="Open Sans, arial, x-locale-body, sans-serif">建立一個新的</font>SpeechRecognition物件</code></dd>
</dl>

<h2 id="屬性">屬性</h2>

<p><em><code>SpeechRecognition</code> 繼承了父介面 {{domxref("EventTarget")}} 的屬性。</em></p>

<dl>
 <dt>{{domxref("SpeechRecognition.grammars")}}</dt>
 <dd>回傳一組用來表示語法且可以被當前的 <code>SpeechRecognition</code> 解析的 {{domxref("SpeechGrammar")}} 物件</dd>
 <dt>{{domxref("SpeechRecognition.lang")}}</dt>
 <dd>取得和設定當前 <code>SpeechRecognition</code> 使用的語言。若沒有特別指定，預設會使用{{htmlattrxref("lang","html")}} 的設定值，或是使用者裝置設定的語言。</dd>
 <dt>{{domxref("SpeechRecognition.continuous")}}</dt>
 <dd>控制每個 recognition 會傳連續的結果還是只回傳單一結果。預設為回傳單一結果 (<code>false</code>.)</dd>
 <dt>{{domxref("SpeechRecognition.interimResults")}}</dt>
 <dd>控制臨時結果是否回傳。 true 回傳，false 不回傳。臨時結果指的是所有非最終 (Final) 結果的結果。 (例如 : {{domxref("SpeechRecognitionResult.isFinal")}} 特性為 <code>false</code>.)</dd>
 <dt>{{domxref("SpeechRecognition.maxAlternatives")}}</dt>
 <dd>設定每個結果中 {{domxref("SpeechRecognitionAlternative")}} 物件的最大數量。預設值為 1。</dd>
 <dt>{{domxref("SpeechRecognition.serviceURI")}}</dt>
 <dd>指定當前的 <code>SpeechRecognition</code> 使用哪個地區的語音辨識服務來辨識語音。預設為使用者裝置的預設語音服務</dd>
</dl>

<h3 id="事件處理">事件處理</h3>

<dl>
 <dt>{{domxref("SpeechRecognition.onaudiostart")}}</dt>
 <dd>當使用者的裝置開始捕捉聲音時觸發。</dd>
 <dt>{{domxref("SpeechRecognition.onaudioend")}}</dt>
 <dd>當使用者的裝置結束捕捉聲音時觸發。</dd>
 <dt>{{domxref("SpeechRecognition.onend")}}</dt>
 <dd>當 speech recognition 服務中斷連線時觸發。</dd>
 <dt>{{domxref("SpeechRecognition.onerror")}}</dt>
 <dd>當 speech recognition 發生錯誤時觸發。</dd>
 <dt>{{domxref("SpeechRecognition.onnomatch")}}</dt>
 <dd>Fired when the speech recognition service returns a final result with no significant recognition. This may involve some degree of recognition, which doesn't meet or exceed the {{domxref("SpeechRecognitionAlternative.confidence","confidence")}} threshold.</dd>
 <dt>{{domxref("SpeechRecognition.onresult")}}</dt>
 <dd>Fired when the speech recognition service returns a result — a word or phrase has been positively recognized and this has been communicated back to the app.</dd>
 <dt>{{domxref("SpeechRecognition.onsoundstart")}}</dt>
 <dd>Fired when any sound — recognisable speech or not — has been detected.</dd>
 <dt>{{domxref("SpeechRecognition.onsoundend")}}</dt>
 <dd>Fired when any sound — recognisable speech or not — has stopped being detected.</dd>
 <dt>{{domxref("SpeechRecognition.onspeechstart")}}</dt>
 <dd>Fired when sound that is recognised by the speech recognition service as speech has been detected.</dd>
 <dt>{{domxref("SpeechRecognition.onspeechend")}}</dt>
 <dd>Fired when speech recognised by the speech recognition service has stopped being detected.</dd>
 <dt>{{domxref("SpeechRecognition.onstart")}}</dt>
 <dd>Fired when the speech recognition service has begun listening to incoming audio with intent to recognize grammars associated with the current <code>SpeechRecognition</code>.</dd>
</dl>

<h2 id="方法">方法</h2>

<p><em><code>SpeechRecognition</code> also inherits methods from its parent interface, {{domxref("EventTarget")}}.</em></p>

<dl>
 <dt>{{domxref("SpeechRecognition.abort()")}}</dt>
 <dd>Stops the speech recognition service from listening to incoming audio, and doesn't attempt to return a {{domxref("SpeechRecognitionResult")}}.</dd>
 <dt>{{domxref("SpeechRecognition.start()")}}</dt>
 <dd>Starts the speech recognition service listening to incoming audio with intent to recognize grammars associated with the current <code>SpeechRecognition</code>.</dd>
 <dt>{{domxref("SpeechRecognition.stop()")}}</dt>
 <dd>Stops the speech recognition service from listening to incoming audio, and attempts to return a {{domxref("SpeechRecognitionResult")}} using the audio captured so far.</dd>
</dl>

<h2 id="範例">範例</h2>

<p>In our simple <a href="https://github.com/mdn/web-speech-api/tree/master/speech-color-changer">Speech color changer</a> example, we create a new <code>SpeechRecognition</code> object instance using the {{domxref("SpeechRecognition.SpeechRecognition", "SpeechRecognition()")}} constructor, create a new {{domxref("SpeechGrammarList")}}, and set it to be the grammar that will be recognised by the <code>SpeechRecognition</code> instance using the {{domxref("SpeechRecognition.grammars")}} property.</p>

<p>After some other values have been defined, we then set it so that the recognition service starts when a click event occurs (see {{domxref("SpeechRecognition.start()")}}.) When a result has been successfully recognised, the {{domxref("SpeechRecognition.onresult")}} handler fires,  we extract the color that was spoken from the event object, and then set the background color of the {{htmlelement("html")}} element to that colour.</p>

<pre class="brush: js">var grammar = '#JSGF V1.0; grammar colors; public &lt;color&gt; = aqua | azure | beige | bisque | black | blue | brown | chocolate | coral | crimson | cyan | fuchsia | ghostwhite | gold | goldenrod | gray | green | indigo | ivory | khaki | lavender | lime | linen | magenta | maroon | moccasin | navy | olive | orange | orchid | peru | pink | plum | purple | red | salmon | sienna | silver | snow | tan | teal | thistle | tomato | turquoise | violet | white | yellow ;'
var recognition = new SpeechRecognition();
var speechRecognitionList = new SpeechGrammarList();
speechRecognitionList.addFromString(grammar, 1);
recognition.grammars = speechRecognitionList;
//recognition.continuous = false;
recognition.lang = 'en-US';
recognition.interimResults = false;
recognition.maxAlternatives = 1;

var diagnostic = document.querySelector('.output');
var bg = document.querySelector('html');

document.body.onclick = function() {
  recognition.start();
  console.log('Ready to receive a color command.');
}

recognition.onresult = function(event) {
  var color = event.results[0][0].transcript;
  diagnostic.textContent = 'Result received: ' + color;
  bg.style.backgroundColor = color;
}</pre>

<h2 id="規格">規格</h2>

<table class="standard-table">
 <tbody>
  <tr>
   <th scope="col">Specification</th>
   <th scope="col">Status</th>
   <th scope="col">Comment</th>
  </tr>
  <tr>
   <td>{{SpecName('Web Speech API', '#speechreco-section', 'SpeechRecognition')}}</td>
   <td>{{Spec2('Web Speech API')}}</td>
   <td> </td>
  </tr>
 </tbody>
</table>

<h2 id="瀏覽器相容性">瀏覽器相容性</h2>

<div>{{CompatibilityTable}}</div>

<div id="compat-desktop">
<table class="compat-table">
 <tbody>
  <tr>
   <th>Feature</th>
   <th>Chrome</th>
   <th>Firefox (Gecko)</th>
   <th>Internet Explorer</th>
   <th>Opera</th>
   <th>Safari (WebKit)</th>
  </tr>
  <tr>
   <td>Basic support</td>
   <td>{{CompatChrome(33)}}{{property_prefix("webkit")}} <sup>[1]</sup></td>
   <td>{{CompatNo}} <sup>[2]</sup></td>
   <td>{{CompatNo}}</td>
   <td>{{CompatNo}}</td>
   <td>{{CompatNo}}</td>
  </tr>
  <tr>
   <td><code>continuous</code></td>
   <td>{{CompatChrome(33)}} <sup>[1]</sup></td>
   <td>{{CompatNo}}</td>
   <td>{{CompatNo}}</td>
   <td>{{CompatNo}}</td>
   <td>{{CompatNo}}</td>
  </tr>
 </tbody>
</table>
</div>

<div id="compat-mobile">
<table class="compat-table">
 <tbody>
  <tr>
   <th>Feature</th>
   <th>Android</th>
   <th>Chrome</th>
   <th>Firefox Mobile (Gecko)</th>
   <th>Firefox OS</th>
   <th>IE Phone</th>
   <th>Opera Mobile</th>
   <th>Safari Mobile</th>
  </tr>
  <tr>
   <td>Basic support</td>
   <td>{{CompatUnknown}}</td>
   <td>{{CompatVersionUnknown}}[1]</td>
   <td>{{CompatGeckoMobile(44)}}</td>
   <td>2.5</td>
   <td>{{CompatNo}}</td>
   <td>{{CompatNo}}</td>
   <td>{{CompatNo}}</td>
  </tr>
  <tr>
   <td><code>continuous</code></td>
   <td>{{CompatUnknown}}</td>
   <td>{{CompatVersionUnknown}}[1]</td>
   <td>{{CompatUnknown}}</td>
   <td>{{CompatNo}}</td>
   <td>{{CompatNo}}</td>
   <td>{{CompatNo}}</td>
   <td>{{CompatNo}}</td>
  </tr>
 </tbody>
</table>
</div>

<ul>
 <li>[1] Speech recognition interfaces are currently prefixed in Chrome, so you'll need to prefix interface names appropriately, e.g. <code>webkitSpeechRecognition</code>; You'll also need to serve your code through a web server for recognition to work.</li>
 <li>[2] Can be enabled via the <code>media.webspeech.recognition.enable</code> flag in <a>about:config</a> on mobile. Not implemented at all on Desktop Firefox — see {{bug(1248897)}}.</li>
</ul>

<h3 id="Firefox_OS_權限">Firefox OS 權限</h3>

<p>欲在你的APP裡面使用語音辨識功能，你必須在APP的<a href="/en-US/docs/Web/Apps/Build/Manifest">manifest</a>中要求下列權限：</p>

<pre class="brush: json">"permissions": {
  "audio-capture" : {
    "description" : "Audio capture"
  },
  "speech-recognition" : {
    "description" : "Speech recognition"
  }
}</pre>

<p>你的APP也必須是一個privileged app，所以你同時需要加入</p>

<pre class="brush: json">  "type": "privileged"</pre>

<h2 id="瞭解更多">瞭解更多</h2>

<ul>
 <li><a href="/en-US/docs/Web/API/Web_Speech_API">Web Speech API</a></li>
</ul>